{"version":3,"sources":["../src/cli/index.ts","../src/cli/commands/config.ts","../src/cli/config.ts","../src/cli/utils.ts","../src/sdk/MemoreumClient.ts","../src/cli/commands/agent.ts","../src/cli/commands/memory.ts","../src/cli/commands/marketplace.ts","../src/cli/commands/chat.ts","../src/ai/base.ts","../src/ai/providers/openai.ts","../src/ai/providers/anthropic.ts","../src/ai/providers/google.ts","../src/ai/providers/groq.ts","../src/ai/providers/together.ts","../src/ai/providers/ollama.ts","../src/ai/index.ts","../src/agent/MemoreumAgent.ts","../src/cli/commands/wallet.ts"],"sourcesContent":["#!/usr/bin/env node\n\nimport { Command } from 'commander';\nimport chalk from 'chalk';\nimport { registerConfigCommands } from './commands/config.js';\nimport { registerAgentCommands } from './commands/agent.js';\nimport { registerMemoryCommands } from './commands/memory.js';\nimport { registerMarketplaceCommands } from './commands/marketplace.js';\nimport { registerChatCommands } from './commands/chat.js';\nimport { registerWalletCommands } from './commands/wallet.js';\nimport { printWelcome } from './utils.js';\n\nconst program = new Command();\n\nprogram\n  .name('memoreum')\n  .description('Memoreum CLI - AI Agent Memory Marketplace on Base Chain')\n  .version('1.0.0')\n  .hook('preAction', () => {\n    // Show welcome on first command\n  });\n\n// Register all commands\nregisterConfigCommands(program);\nregisterAgentCommands(program);\nregisterMemoryCommands(program);\nregisterMarketplaceCommands(program);\nregisterChatCommands(program);\nregisterWalletCommands(program);\n\n// Default action (no command)\nprogram.action(() => {\n  printWelcome();\n  \n  console.log(chalk.bold('Quick Start:'));\n  console.log();\n  console.log('  1. Setup your configuration:');\n  console.log(chalk.cyan('     memoreum config setup'));\n  console.log();\n  console.log('  2. Register a new agent:');\n  console.log(chalk.cyan('     memoreum agent register <name>'));\n  console.log();\n  console.log('  3. Start chatting:');\n  console.log(chalk.cyan('     memoreum chat'));\n  console.log();\n  console.log(chalk.gray('Run `memoreum --help` for all commands.'));\n  console.log();\n});\n\n// Parse and run\nprogram.parse();\n","import { Command } from 'commander';\nimport inquirer from 'inquirer';\nimport chalk from 'chalk';\nimport {\n  getConfig,\n  setApiKey,\n  setNetwork,\n  setBaseUrl,\n  getAIProviders,\n  setAIProvider,\n  removeAIProvider,\n  setDefaultAIProvider,\n  clearConfig,\n} from '../config.js';\nimport { success, error, info, printTable, heading, printBox } from '../utils.js';\nimport type { AIProvider } from '../../types/index.js';\n\nconst AI_PROVIDERS: AIProvider[] = ['openai', 'anthropic', 'google', 'groq', 'together', 'ollama', 'deepseek', 'mistral'];\n\nexport function registerConfigCommands(program: Command): void {\n  const configCmd = program\n    .command('config')\n    .description('Manage Memoreum CLI configuration');\n\n  // Show current config\n  configCmd\n    .command('show')\n    .description('Show current configuration')\n    .action(() => {\n      const config = getConfig();\n      \n      heading('Current Configuration');\n      \n      const configData = [\n        ['API Key', config.apiKey ? '********' + config.apiKey.slice(-8) : chalk.gray('Not set')],\n        ['Network', config.network],\n        ['Base URL', config.baseUrl],\n      ];\n      \n      printTable(configData, ['Setting', 'Value']);\n      \n      const providers = getAIProviders();\n      if (Object.keys(providers).length > 0) {\n        heading('AI Providers');\n        const providerData = Object.entries(providers).map(([name, p]) => [\n          name,\n          p.provider,\n          p.model || 'default',\n          '********' + p.apiKey.slice(-4),\n        ]);\n        printTable(providerData, ['Name', 'Provider', 'Model', 'API Key']);\n      }\n    });\n\n  // Set API key\n  configCmd\n    .command('set-key <apiKey>')\n    .description('Set your Memoreum API key')\n    .action((apiKey: string) => {\n      setApiKey(apiKey);\n      success('API key saved successfully');\n    });\n\n  // Set network\n  configCmd\n    .command('network <network>')\n    .description('Set network (mainnet or testnet)')\n    .action((network: string) => {\n      if (network !== 'mainnet' && network !== 'testnet') {\n        error('Network must be \"mainnet\" or \"testnet\"');\n        return;\n      }\n      setNetwork(network);\n      success(`Network set to ${network}`);\n    });\n\n  // Set base URL\n  configCmd\n    .command('url <url>')\n    .description('Set custom API base URL')\n    .action((url: string) => {\n      setBaseUrl(url);\n      success(`Base URL set to ${url}`);\n    });\n\n  // Add AI provider\n  configCmd\n    .command('add-provider')\n    .description('Add an AI provider configuration')\n    .action(async () => {\n      const answers = await inquirer.prompt([\n        {\n          type: 'input',\n          name: 'name',\n          message: 'Configuration name (e.g., \"default\", \"fast\", \"smart\"):',\n          default: 'default',\n        },\n        {\n          type: 'list',\n          name: 'provider',\n          message: 'Select AI provider:',\n          choices: AI_PROVIDERS,\n        },\n        {\n          type: 'input',\n          name: 'apiKey',\n          message: 'Enter your API key:',\n          validate: (input: string) => input.length > 0 || 'API key is required',\n        },\n        {\n          type: 'input',\n          name: 'model',\n          message: 'Model name (leave empty for default):',\n        },\n        {\n          type: 'number',\n          name: 'temperature',\n          message: 'Temperature (0-2):',\n          default: 0.7,\n        },\n        {\n          type: 'number',\n          name: 'maxTokens',\n          message: 'Max tokens:',\n          default: 4096,\n        },\n      ]);\n\n      setAIProvider(answers.name, {\n        provider: answers.provider,\n        apiKey: answers.apiKey,\n        model: answers.model || undefined,\n        temperature: answers.temperature,\n        maxTokens: answers.maxTokens,\n      });\n\n      success(`AI provider \"${answers.name}\" configured successfully`);\n    });\n\n  // Remove AI provider\n  configCmd\n    .command('remove-provider <name>')\n    .description('Remove an AI provider configuration')\n    .action((name: string) => {\n      const providers = getAIProviders();\n      if (!providers[name]) {\n        error(`Provider \"${name}\" not found`);\n        return;\n      }\n      removeAIProvider(name);\n      success(`Provider \"${name}\" removed`);\n    });\n\n  // List AI providers\n  configCmd\n    .command('providers')\n    .description('List configured AI providers')\n    .action(() => {\n      const providers = getAIProviders();\n      \n      if (Object.keys(providers).length === 0) {\n        info('No AI providers configured. Run `memoreum config add-provider` to add one.');\n        return;\n      }\n\n      heading('Configured AI Providers');\n      const data = Object.entries(providers).map(([name, p]) => [\n        name,\n        p.provider,\n        p.model || 'default',\n        String(p.temperature ?? 0.7),\n        String(p.maxTokens ?? 4096),\n      ]);\n      printTable(data, ['Name', 'Provider', 'Model', 'Temperature', 'Max Tokens']);\n    });\n\n  // Reset config\n  configCmd\n    .command('reset')\n    .description('Reset all configuration')\n    .action(async () => {\n      const { confirm } = await inquirer.prompt([\n        {\n          type: 'confirm',\n          name: 'confirm',\n          message: 'Are you sure you want to reset all configuration?',\n          default: false,\n        },\n      ]);\n\n      if (confirm) {\n        clearConfig();\n        success('Configuration reset');\n      }\n    });\n\n  // Quick setup\n  configCmd\n    .command('setup')\n    .description('Interactive setup wizard')\n    .action(async () => {\n      printBox(\n        'Welcome to Memoreum CLI Setup!\\n\\n' +\n        'This wizard will help you configure:\\n' +\n        '• Your Memoreum API key\\n' +\n        '• AI provider (OpenAI, Claude, etc.)\\n' +\n        '• Network settings',\n        'Setup Wizard'\n      );\n\n      const answers = await inquirer.prompt([\n        {\n          type: 'input',\n          name: 'apiKey',\n          message: 'Enter your Memoreum API key:',\n          validate: (input: string) => input.length > 0 || 'API key is required',\n        },\n        {\n          type: 'list',\n          name: 'network',\n          message: 'Select network:',\n          choices: ['mainnet', 'testnet'],\n          default: 'mainnet',\n        },\n        {\n          type: 'confirm',\n          name: 'setupAI',\n          message: 'Would you like to configure an AI provider now?',\n          default: true,\n        },\n      ]);\n\n      setApiKey(answers.apiKey);\n      setNetwork(answers.network);\n\n      if (answers.setupAI) {\n        const aiAnswers = await inquirer.prompt([\n          {\n            type: 'list',\n            name: 'provider',\n            message: 'Select AI provider:',\n            choices: AI_PROVIDERS,\n          },\n          {\n            type: 'input',\n            name: 'aiApiKey',\n            message: 'Enter your AI provider API key:',\n            validate: (input: string) => input.length > 0 || 'API key is required',\n          },\n        ]);\n\n        setDefaultAIProvider({\n          provider: aiAnswers.provider,\n          apiKey: aiAnswers.aiApiKey,\n        });\n      }\n\n      success('Setup complete! You can now use Memoreum CLI.');\n      info('Run `memoreum --help` to see available commands.');\n    });\n}\n","import Conf from 'conf';\nimport type { CLIConfig, LocalAgentConfig, AIProviderConfig } from '../types/index.js';\n\nconst config = new Conf<{\n  config: CLIConfig;\n  agents: LocalAgentConfig[];\n  currentAgent: string | null;\n  aiProviders: Record<string, AIProviderConfig>;\n}>({\n  projectName: 'memoreum',\n  defaults: {\n    config: {\n      baseUrl: 'https://api.memoreum.app',\n      network: 'mainnet',\n    },\n    agents: [],\n    currentAgent: null,\n    aiProviders: {},\n  },\n});\n\nexport function getConfig(): CLIConfig {\n  return config.get('config');\n}\n\nexport function setConfig(updates: Partial<CLIConfig>): void {\n  const current = getConfig();\n  config.set('config', { ...current, ...updates });\n}\n\nexport function getApiKey(): string | undefined {\n  return getConfig().apiKey;\n}\n\nexport function setApiKey(apiKey: string): void {\n  setConfig({ apiKey });\n}\n\nexport function getBaseUrl(): string {\n  return getConfig().baseUrl;\n}\n\nexport function setBaseUrl(url: string): void {\n  setConfig({ baseUrl: url });\n}\n\nexport function getNetwork(): 'mainnet' | 'testnet' {\n  return getConfig().network;\n}\n\nexport function setNetwork(network: 'mainnet' | 'testnet'): void {\n  setConfig({ network });\n}\n\n// Agent management\nexport function getAgents(): LocalAgentConfig[] {\n  return config.get('agents');\n}\n\nexport function addAgent(agent: LocalAgentConfig): void {\n  const agents = getAgents();\n  agents.push(agent);\n  config.set('agents', agents);\n}\n\nexport function removeAgent(agentId: string): void {\n  const agents = getAgents().filter((a) => a.id !== agentId);\n  config.set('agents', agents);\n}\n\nexport function getCurrentAgentId(): string | null {\n  return config.get('currentAgent');\n}\n\nexport function setCurrentAgent(agentId: string | null): void {\n  config.set('currentAgent', agentId);\n}\n\nexport function getCurrentAgent(): LocalAgentConfig | null {\n  const currentId = getCurrentAgentId();\n  if (!currentId) return null;\n  return getAgents().find((a) => a.id === currentId) || null;\n}\n\n// AI Provider management\nexport function getAIProviders(): Record<string, AIProviderConfig> {\n  return config.get('aiProviders');\n}\n\nexport function setAIProvider(name: string, providerConfig: AIProviderConfig): void {\n  const providers = getAIProviders();\n  providers[name] = providerConfig;\n  config.set('aiProviders', providers);\n}\n\nexport function getAIProvider(name: string): AIProviderConfig | undefined {\n  return getAIProviders()[name];\n}\n\nexport function removeAIProvider(name: string): void {\n  const providers = getAIProviders();\n  delete providers[name];\n  config.set('aiProviders', providers);\n}\n\nexport function getDefaultAIProvider(): AIProviderConfig | undefined {\n  const providers = getAIProviders();\n  return providers['default'] || Object.values(providers)[0];\n}\n\nexport function setDefaultAIProvider(providerConfig: AIProviderConfig): void {\n  setAIProvider('default', providerConfig);\n}\n\n// Clear all config\nexport function clearConfig(): void {\n  config.clear();\n}\n\nexport default config;\n","import chalk from 'chalk';\nimport ora from 'ora';\nimport boxen from 'boxen';\nimport { table } from 'table';\nimport { getApiKey, getCurrentAgent } from './config.js';\nimport { MemoreumClient } from '../sdk/MemoreumClient.js';\n\nexport const spinner = ora;\n\nexport function success(message: string): void {\n  console.log(chalk.green('✓'), message);\n}\n\nexport function error(message: string): void {\n  console.log(chalk.red('✗'), message);\n}\n\nexport function warn(message: string): void {\n  console.log(chalk.yellow('!'), message);\n}\n\nexport function info(message: string): void {\n  console.log(chalk.blue('i'), message);\n}\n\nexport function heading(text: string): void {\n  console.log('\\n' + chalk.bold.cyan(text) + '\\n');\n}\n\nexport function printBox(content: string, title?: string): void {\n  console.log(\n    boxen(content, {\n      padding: 1,\n      margin: 1,\n      borderStyle: 'round',\n      borderColor: 'cyan',\n      title,\n      titleAlignment: 'center',\n    })\n  );\n}\n\nexport function printTable(data: string[][], headers?: string[]): void {\n  const tableData = headers ? [headers, ...data] : data;\n  console.log(\n    table(tableData, {\n      border: {\n        topBody: '─',\n        topJoin: '┬',\n        topLeft: '┌',\n        topRight: '┐',\n        bottomBody: '─',\n        bottomJoin: '┴',\n        bottomLeft: '└',\n        bottomRight: '┘',\n        bodyLeft: '│',\n        bodyRight: '│',\n        bodyJoin: '│',\n        joinBody: '─',\n        joinLeft: '├',\n        joinRight: '┤',\n        joinJoin: '┼',\n      },\n    })\n  );\n}\n\nexport function formatEth(eth: string | number): string {\n  const value = typeof eth === 'string' ? parseFloat(eth) : eth;\n  return `${value.toFixed(6)} ETH`;\n}\n\nexport function formatDate(date: Date | string): string {\n  const d = typeof date === 'string' ? new Date(date) : date;\n  return d.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n}\n\nexport function truncate(str: string, length: number): string {\n  if (str.length <= length) return str;\n  return str.slice(0, length - 3) + '...';\n}\n\nexport function getClient(): MemoreumClient {\n  const apiKey = getApiKey();\n  if (!apiKey) {\n    error('No API key configured. Run `memoreum config set-key <key>` first.');\n    process.exit(1);\n  }\n  return new MemoreumClient({ apiKey });\n}\n\nexport function requireApiKey(): string {\n  const apiKey = getApiKey();\n  if (!apiKey) {\n    error('No API key configured. Run `memoreum config set-key <key>` first.');\n    process.exit(1);\n  }\n  return apiKey;\n}\n\nexport function requireAgent(): { id: string; apiKey: string } {\n  const agent = getCurrentAgent();\n  if (!agent) {\n    error('No agent selected. Run `memoreum agent use <id>` first.');\n    process.exit(1);\n  }\n  return { id: agent.id, apiKey: agent.apiKey };\n}\n\nexport function printWelcome(): void {\n  const banner = `\n${chalk.cyan('╔══════════════════════════════════════╗')}\n${chalk.cyan('║')}  ${chalk.bold.white('MEMOREUM')} ${chalk.gray('- AI Agent Memory Network')}  ${chalk.cyan('║')}\n${chalk.cyan('╚══════════════════════════════════════╝')}\n`;\n  console.log(banner);\n}\n\nexport function printHelp(commands: Array<{ name: string; description: string }>): void {\n  heading('Available Commands');\n  commands.forEach(({ name, description }) => {\n    console.log(`  ${chalk.cyan(name.padEnd(20))} ${chalk.gray(description)}`);\n  });\n  console.log();\n}\n\nexport async function withSpinner<T>(\n  message: string,\n  fn: () => Promise<T>\n): Promise<T> {\n  const s = spinner(message).start();\n  try {\n    const result = await fn();\n    s.succeed();\n    return result;\n  } catch (err) {\n    s.fail();\n    throw err;\n  }\n}\n","import { ethers } from 'ethers';\nimport type {\n  MemoreumConfig,\n  Agent,\n  AgentStats,\n  Memory,\n  CreateMemoryInput,\n  MemorySearchParams,\n  MarketplaceListing,\n  CreateListingInput,\n  MarketplaceSearchParams,\n  Transaction,\n  PurchaseInput,\n  PurchaseResult,\n  WalletInfo,\n  TransferInput,\n  TransferResult,\n  APIResponse,\n  PaginatedResponse,\n} from '../types/index.js';\n\nconst DEFAULT_BASE_URL = 'https://api.memoreum.app';\nconst TESTNET_BASE_URL = 'https://testnet-api.memoreum.app';\n\nexport class MemoreumClient {\n  private apiKey: string;\n  private baseUrl: string;\n  private network: 'mainnet' | 'testnet';\n  private provider: ethers.JsonRpcProvider | null = null;\n  private wallet: ethers.Wallet | null = null;\n  private _agentData: Agent | null = null;\n\n  constructor(config: MemoreumConfig) {\n    this.apiKey = config.apiKey;\n    this.network = config.network || 'mainnet';\n    this.baseUrl = config.baseUrl || (this.network === 'testnet' ? TESTNET_BASE_URL : DEFAULT_BASE_URL);\n  }\n\n  // ============================================\n  // HTTP Methods\n  // ============================================\n\n  private async request<T>(\n    endpoint: string,\n    options: RequestInit = {}\n  ): Promise<APIResponse<T>> {\n    const url = `${this.baseUrl}${endpoint}`;\n    \n    const headers: Record<string, string> = {\n      'Content-Type': 'application/json',\n      'X-API-Key': this.apiKey,\n      ...((options.headers as Record<string, string>) || {}),\n    };\n\n    try {\n      const response = await fetch(url, {\n        ...options,\n        headers,\n      });\n\n      const data = (await response.json()) as { data?: T; error?: string };\n\n      if (!response.ok) {\n        return {\n          success: false,\n          error: data.error || `HTTP ${response.status}: ${response.statusText}`,\n        };\n      }\n\n      return {\n        success: true,\n        data: (data.data || data) as T,\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error occurred',\n      };\n    }\n  }\n\n  private async get<T>(endpoint: string): Promise<APIResponse<T>> {\n    return this.request<T>(endpoint, { method: 'GET' });\n  }\n\n  private async post<T>(endpoint: string, body: unknown): Promise<APIResponse<T>> {\n    return this.request<T>(endpoint, {\n      method: 'POST',\n      body: JSON.stringify(body),\n    });\n  }\n\n  private async delete<T>(endpoint: string): Promise<APIResponse<T>> {\n    return this.request<T>(endpoint, { method: 'DELETE' });\n  }\n\n  // ============================================\n  // Agent Methods\n  // ============================================\n\n  /**\n   * Get the current agent's profile\n   */\n  async getAgent(): Promise<APIResponse<Agent>> {\n    const response = await this.get<Agent>('/api/v1/auth/me');\n    if (response.success && response.data) {\n      this._agentData = response.data;\n    }\n    return response;\n  }\n\n  /**\n   * Get cached agent data (call getAgent() first)\n   */\n  getCachedAgent(): Agent | null {\n    return this._agentData;\n  }\n\n  /**\n   * Register a new agent (no API key required)\n   */\n  async registerAgent(name: string): Promise<APIResponse<Agent>> {\n    // Registration doesn't require API key, make direct fetch call\n    try {\n      const response = await fetch(`${this.baseUrl}/api/v1/auth/register`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ agentName: name }),\n      });\n\n      const data = (await response.json()) as { success: boolean; data?: Agent; error?: string; message?: string };\n\n      if (!response.ok || !data.success) {\n        return {\n          success: false,\n          error: data.message || data.error || `HTTP ${response.status}`,\n        };\n      }\n\n      return {\n        success: true,\n        data: data.data as Agent,\n      };\n    } catch (err) {\n      return {\n        success: false,\n        error: err instanceof Error ? err.message : 'Registration failed',\n      };\n    }\n  }\n\n  /**\n   * Get agent statistics\n   */\n  async getAgentStats(): Promise<APIResponse<AgentStats>> {\n    return this.get<AgentStats>('/api/v1/analytics/me');\n  }\n\n  /**\n   * Regenerate API key\n   */\n  async regenerateApiKey(): Promise<APIResponse<{ apiKey: string }>> {\n    return this.post<{ apiKey: string }>('/api/v1/auth/regenerate-key', {});\n  }\n\n  // ============================================\n  // Memory Methods\n  // ============================================\n\n  /**\n   * Store a new memory\n   */\n  async storeMemory(input: CreateMemoryInput): Promise<APIResponse<Memory>> {\n    return this.post<Memory>('/api/v1/memories', {\n      title: input.title,\n      description: input.content,\n      categoryId: input.categoryId,\n      memoryData: input.memoryData,\n      tags: input.tags ?? [],\n      isForSale: input.isPublic ?? false,\n      priceEth: input.priceEth,\n    });\n  }\n\n  /**\n   * Get a memory by ID\n   */\n  async getMemory(memoryId: string): Promise<APIResponse<Memory>> {\n    return this.get<Memory>(`/api/v1/memories/${memoryId}`);\n  }\n\n  /**\n   * List agent's memories\n   */\n  async listMemories(params?: MemorySearchParams): Promise<APIResponse<PaginatedResponse<Memory>>> {\n    const queryParams = new URLSearchParams();\n    \n    if (params?.isPublic !== undefined) queryParams.set('isForSale', String(params.isPublic));\n    if (params?.categoryId) queryParams.set('categoryId', String(params.categoryId));\n    if (params?.limit) queryParams.set('limit', String(params.limit));\n    if (params?.offset) queryParams.set('page', String(Math.floor((params.offset || 0) / (params.limit || 20)) + 1));\n\n    const query = queryParams.toString();\n    return this.get<PaginatedResponse<Memory>>(`/api/v1/memories${query ? `?${query}` : ''}`);\n  }\n\n  /**\n   * Search marketplace memories\n   */\n  async searchMemories(query: string, limit = 10): Promise<APIResponse<Memory[]>> {\n    const queryParams = new URLSearchParams();\n    queryParams.set('q', query);\n    queryParams.set('limit', String(limit));\n    return this.get<Memory[]>(`/api/v1/memories/search/marketplace?${queryParams.toString()}`);\n  }\n\n  /**\n   * Update a memory\n   */\n  async updateMemory(\n    memoryId: string,\n    updates: Partial<Pick<CreateMemoryInput, 'title' | 'content' | 'tags' | 'isPublic' | 'priceEth'>>\n  ): Promise<APIResponse<Memory>> {\n    return this.request<Memory>(`/api/v1/memories/${memoryId}`, {\n      method: 'PATCH',\n      body: JSON.stringify({\n        title: updates.title,\n        description: updates.content,\n        tags: updates.tags,\n        isForSale: updates.isPublic,\n        priceEth: updates.priceEth,\n      }),\n    });\n  }\n\n  /**\n   * Delete a memory\n   */\n  async deleteMemory(memoryId: string): Promise<APIResponse<{ deleted: boolean }>> {\n    return this.delete<{ deleted: boolean }>(`/api/v1/memories/${memoryId}`);\n  }\n\n  /**\n   * Get memory template\n   */\n  async getMemoryTemplate(): Promise<APIResponse<unknown>> {\n    return this.get<unknown>('/api/v1/memories/template');\n  }\n\n  /**\n   * Get memory categories\n   */\n  async getCategories(): Promise<APIResponse<unknown[]>> {\n    return this.get<unknown[]>('/api/v1/memories/categories');\n  }\n\n  // ============================================\n  // Marketplace Methods\n  // ============================================\n\n  /**\n   * List a memory for sale\n   */\n  async createListing(input: CreateListingInput): Promise<APIResponse<MarketplaceListing>> {\n    return this.post<MarketplaceListing>('/api/v1/marketplace/listings', {\n      memoryId: input.memoryId,\n      priceEth: input.priceEth,\n      expiresAt: input.expiresAt,\n    });\n  }\n\n  /**\n   * Get a listing by ID\n   */\n  async getListing(listingId: string): Promise<APIResponse<MarketplaceListing>> {\n    return this.get<MarketplaceListing>(`/api/v1/marketplace/listings/${listingId}`);\n  }\n\n  /**\n   * Browse marketplace listings\n   */\n  async browseMarketplace(params?: MarketplaceSearchParams): Promise<APIResponse<PaginatedResponse<MarketplaceListing>>> {\n    const queryParams = new URLSearchParams();\n    \n    if (params?.categoryId) queryParams.set('categoryId', String(params.categoryId));\n    if (params?.minPrice) queryParams.set('minPrice', params.minPrice);\n    if (params?.maxPrice) queryParams.set('maxPrice', params.maxPrice);\n    if (params?.sortBy) queryParams.set('sortBy', params.sortBy);\n    if (params?.limit) queryParams.set('limit', String(params.limit));\n    if (params?.offset) queryParams.set('page', String(Math.floor((params.offset || 0) / (params.limit || 20)) + 1));\n\n    const query = queryParams.toString();\n    return this.get<PaginatedResponse<MarketplaceListing>>(`/api/v1/marketplace${query ? `?${query}` : ''}`);\n  }\n\n  /**\n   * Get my listings\n   */\n  async getMyListings(): Promise<APIResponse<MarketplaceListing[]>> {\n    return this.get<MarketplaceListing[]>('/api/v1/marketplace/my-listings');\n  }\n\n  /**\n   * Update a listing\n   */\n  async updateListing(\n    listingId: string,\n    updates: Partial<Pick<CreateListingInput, 'priceEth'> & { isActive: boolean }>\n  ): Promise<APIResponse<MarketplaceListing>> {\n    return this.request<MarketplaceListing>(`/api/v1/marketplace/listings/${listingId}`, {\n      method: 'PATCH',\n      body: JSON.stringify(updates),\n    });\n  }\n\n  /**\n   * Remove a listing (deactivate)\n   */\n  async removeListing(listingId: string): Promise<APIResponse<{ removed: boolean }>> {\n    return this.request<{ removed: boolean }>(`/api/v1/marketplace/listings/${listingId}`, {\n      method: 'PATCH',\n      body: JSON.stringify({ isActive: false }),\n    });\n  }\n\n  // ============================================\n  // Purchase Methods\n  // ============================================\n\n  /**\n   * Purchase a memory from the marketplace\n   */\n  async purchaseMemory(input: PurchaseInput): Promise<APIResponse<PurchaseResult>> {\n    return this.post<PurchaseResult>(`/api/v1/marketplace/listings/${input.listingId}/purchase`, {});\n  }\n\n  /**\n   * Get transaction history\n   */\n  async getTransactionHistory(type: 'all' | 'purchases' | 'sales' = 'all'): Promise<APIResponse<Transaction[]>> {\n    return this.get<Transaction[]>(`/api/v1/marketplace/transactions?type=${type}`);\n  }\n\n  /**\n   * Get purchase history\n   */\n  async getPurchaseHistory(): Promise<APIResponse<Transaction[]>> {\n    return this.getTransactionHistory('purchases');\n  }\n\n  /**\n   * Get sales history\n   */\n  async getSalesHistory(): Promise<APIResponse<Transaction[]>> {\n    return this.getTransactionHistory('sales');\n  }\n\n  /**\n   * Get transaction by ID\n   */\n  async getTransaction(transactionId: string): Promise<APIResponse<Transaction>> {\n    return this.get<Transaction>(`/api/v1/marketplace/transactions/${transactionId}`);\n  }\n\n  /**\n   * Get purchased memories\n   */\n  async getPurchasedMemories(): Promise<APIResponse<Memory[]>> {\n    return this.get<Memory[]>('/api/v1/memories/purchased');\n  }\n\n  /**\n   * Get marketplace info\n   */\n  async getMarketplaceInfo(): Promise<APIResponse<unknown>> {\n    return this.get<unknown>('/api/v1/marketplace/info');\n  }\n\n  // ============================================\n  // Wallet Methods\n  // ============================================\n\n  /**\n   * Initialize wallet with private key\n   */\n  async initializeWallet(privateKey: string): Promise<void> {\n    const rpcUrl = this.network === 'mainnet' \n      ? 'https://mainnet.base.org'\n      : 'https://sepolia.base.org';\n    \n    this.provider = new ethers.JsonRpcProvider(rpcUrl);\n    this.wallet = new ethers.Wallet(privateKey, this.provider);\n  }\n\n  /**\n   * Get wallet information\n   */\n  async getWalletInfo(): Promise<APIResponse<WalletInfo>> {\n    if (!this.wallet || !this.provider) {\n      return { success: false, error: 'Wallet not initialized. Call initializeWallet() first.' };\n    }\n\n    try {\n      const balance = await this.provider.getBalance(this.wallet.address);\n      const network = await this.provider.getNetwork();\n\n      return {\n        success: true,\n        data: {\n          address: this.wallet.address,\n          balanceEth: ethers.formatEther(balance),\n          balanceWei: balance.toString(),\n          network: network.name,\n        },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Failed to get wallet info',\n      };\n    }\n  }\n\n  /**\n   * Transfer ETH\n   */\n  async transfer(input: TransferInput): Promise<APIResponse<TransferResult>> {\n    if (!this.wallet) {\n      return { success: false, error: 'Wallet not initialized. Call initializeWallet() first.' };\n    }\n\n    try {\n      const tx = await this.wallet.sendTransaction({\n        to: input.to,\n        value: ethers.parseEther(input.amountEth),\n      });\n\n      const receipt = await tx.wait();\n\n      return {\n        success: true,\n        data: {\n          txHash: tx.hash,\n          from: this.wallet.address,\n          to: input.to,\n          amountEth: input.amountEth,\n          gasUsed: receipt?.gasUsed.toString() || '0',\n        },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Transfer failed',\n      };\n    }\n  }\n\n  /**\n   * Get wallet balance from API\n   */\n  async getBalance(): Promise<APIResponse<{ balanceEth: string }>> {\n    return this.get<{ balanceEth: string }>('/api/v1/auth/wallet/balance');\n  }\n\n  /**\n   * Get full wallet info from API\n   */\n  async getWalletFromApi(): Promise<APIResponse<WalletInfo>> {\n    return this.get<WalletInfo>('/api/v1/auth/wallet');\n  }\n\n  /**\n   * Transfer ETH via API\n   */\n  async transferViaApi(toAddress: string, amountEth: number): Promise<APIResponse<TransferResult>> {\n    return this.post<TransferResult>('/api/v1/auth/wallet/transfer', { toAddress, amountEth });\n  }\n\n  // ============================================\n  // Utility Methods\n  // ============================================\n\n  /**\n   * Generate content hash for a memory\n   */\n  generateContentHash(content: string): string {\n    return ethers.keccak256(ethers.toUtf8Bytes(content));\n  }\n\n  /**\n   * Verify API key is valid\n   */\n  async verifyApiKey(): Promise<boolean> {\n    const response = await this.getAgent();\n    return response.success;\n  }\n\n  /**\n   * Get the current network\n   */\n  getNetwork(): 'mainnet' | 'testnet' {\n    return this.network;\n  }\n\n  /**\n   * Get wallet address\n   */\n  getWalletAddress(): string | null {\n    return this.wallet?.address || null;\n  }\n}\n\nexport default MemoreumClient;\n","import { Command } from 'commander';\nimport inquirer from 'inquirer';\nimport chalk from 'chalk';\nimport { MemoreumClient } from '../../sdk/MemoreumClient.js';\nimport {\n  getApiKey,\n  getAgents,\n  addAgent,\n  removeAgent,\n  setCurrentAgent,\n  getCurrentAgent,\n  getCurrentAgentId,\n} from '../config.js';\nimport {\n  success,\n  error,\n  info,\n  warn,\n  printTable,\n  heading,\n  withSpinner,\n  formatDate,\n} from '../utils.js';\nimport type { LocalAgentConfig } from '../../types/index.js';\n\nexport function registerAgentCommands(program: Command): void {\n  const agentCmd = program\n    .command('agent')\n    .description('Manage Memoreum agents');\n\n  // Register new agent\n  agentCmd\n    .command('register <name>')\n    .description('Register a new agent on Memoreum')\n    .action(async (name: string) => {\n      try {\n        // Registration doesn't need an API key - create client with empty key\n        const client = new MemoreumClient({ apiKey: '' });\n        \n        const agent = await withSpinner('Registering agent...', async () => {\n          const response = await client.registerAgent(name);\n          if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to register agent');\n          }\n          return response.data;\n        });\n\n        // The response includes agentId, agentName, apiKey, wallet info\n        const agentData = agent as unknown as {\n          agentId: string;\n          agentName: string;\n          apiKey: string;\n          wallet: {\n            address: string;\n            privateKey: string;\n            mnemonic: string;\n          };\n        };\n\n        // Save locally\n        const localAgent: LocalAgentConfig = {\n          id: agentData.agentId,\n          name: agentData.agentName,\n          apiKey: agentData.apiKey,\n          walletAddress: agentData.wallet.address,\n          createdAt: new Date().toISOString(),\n        };\n        addAgent(localAgent);\n        setCurrentAgent(agentData.agentId);\n\n        success(`Agent \"${name}\" registered successfully!`);\n        console.log();\n        console.log(chalk.gray('Agent ID:'), agentData.agentId);\n        console.log(chalk.gray('API Key:'), agentData.apiKey);\n        console.log(chalk.gray('Wallet:'), agentData.wallet.address);\n        console.log();\n        console.log(chalk.yellow('IMPORTANT: Save these credentials securely!'));\n        console.log(chalk.gray('Private Key:'), agentData.wallet.privateKey);\n        console.log(chalk.gray('Mnemonic:'), agentData.wallet.mnemonic);\n        console.log();\n        warn('These credentials cannot be retrieved later!');\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to register agent');\n      }\n    });\n\n  // List local agents\n  agentCmd\n    .command('list')\n    .description('List locally saved agents')\n    .action(() => {\n      const agents = getAgents();\n      const currentId = getCurrentAgentId();\n\n      if (agents.length === 0) {\n        info('No agents saved locally. Run `memoreum agent register <name>` to create one.');\n        return;\n      }\n\n      heading('Local Agents');\n      const data = agents.map((a) => [\n        a.id === currentId ? chalk.green('*') : ' ',\n        a.name,\n        a.id.slice(0, 16) + '...',\n        a.walletAddress.slice(0, 10) + '...',\n        formatDate(a.createdAt),\n      ]);\n      printTable(data, ['', 'Name', 'ID', 'Wallet', 'Created']);\n    });\n\n  // Select agent\n  agentCmd\n    .command('use <idOrName>')\n    .description('Select an agent to use')\n    .action((idOrName: string) => {\n      const agents = getAgents();\n      const agent = agents.find(\n        (a) => a.id === idOrName || a.id.startsWith(idOrName) || a.name === idOrName\n      );\n\n      if (!agent) {\n        error(`Agent \"${idOrName}\" not found`);\n        return;\n      }\n\n      setCurrentAgent(agent.id);\n      success(`Now using agent \"${agent.name}\"`);\n    });\n\n  // Show current agent\n  agentCmd\n    .command('current')\n    .description('Show currently selected agent')\n    .action(() => {\n      const agent = getCurrentAgent();\n      \n      if (!agent) {\n        info('No agent selected. Run `memoreum agent use <id>` to select one.');\n        return;\n      }\n\n      heading('Current Agent');\n      const data = [\n        ['Name', agent.name],\n        ['ID', agent.id],\n        ['Wallet', agent.walletAddress],\n        ['API Key', '********' + agent.apiKey.slice(-8)],\n        ['Created', formatDate(agent.createdAt)],\n      ];\n      printTable(data, ['Field', 'Value']);\n    });\n\n  // Get agent info from API\n  agentCmd\n    .command('info')\n    .description('Get current agent info from Memoreum API')\n    .action(async () => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        const agentData = await withSpinner('Fetching agent info...', async () => {\n          const response = await client.getAgent();\n          if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to fetch agent');\n          }\n          return response.data;\n        });\n\n        heading('Agent Info');\n        const data = [\n          ['Name', agentData.agentName],\n          ['ID', agentData.id],\n          ['Wallet', agentData.walletAddress],\n          ['Reputation', `${(agentData.reputationScore * 100).toFixed(1)}%`],\n          ['Total Sales', String(agentData.totalSales)],\n          ['Total Purchases', String(agentData.totalPurchases)],\n          ['Status', agentData.isActive ? chalk.green('Active') : chalk.red('Inactive')],\n          ['Created', formatDate(agentData.createdAt)],\n        ];\n        printTable(data, ['Field', 'Value']);\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to fetch agent');\n      }\n    });\n\n  // Get agent stats\n  agentCmd\n    .command('stats')\n    .description('Get agent statistics')\n    .action(async () => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        const stats = await withSpinner('Fetching stats...', async () => {\n          const response = await client.getAgentStats();\n          if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to fetch stats');\n          }\n          return response.data;\n        });\n\n        heading('Agent Statistics');\n        const data = [\n          ['Memories Stored', String(stats.memoriesStored)],\n          ['Memories Sold', String(stats.memoriesSold)],\n          ['Memories Purchased', String(stats.memoriesPurchased)],\n          ['Total Earnings', `${stats.totalEarnings} ETH`],\n          ['Total Spent', `${stats.totalSpent} ETH`],\n          ['Reputation', `${(stats.reputationScore * 100).toFixed(1)}%`],\n        ];\n        printTable(data, ['Metric', 'Value']);\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to fetch stats');\n      }\n    });\n\n  // Remove agent\n  agentCmd\n    .command('remove <idOrName>')\n    .description('Remove an agent from local storage')\n    .action(async (idOrName: string) => {\n      const agents = getAgents();\n      const agent = agents.find(\n        (a) => a.id === idOrName || a.id.startsWith(idOrName) || a.name === idOrName\n      );\n\n      if (!agent) {\n        error(`Agent \"${idOrName}\" not found`);\n        return;\n      }\n\n      const { confirm } = await inquirer.prompt([\n        {\n          type: 'confirm',\n          name: 'confirm',\n          message: `Remove agent \"${agent.name}\" from local storage?`,\n          default: false,\n        },\n      ]);\n\n      if (confirm) {\n        removeAgent(agent.id);\n        if (getCurrentAgentId() === agent.id) {\n          setCurrentAgent(null);\n        }\n        success(`Agent \"${agent.name}\" removed`);\n        warn('Note: This only removes from local storage, not from Memoreum.');\n      }\n    });\n\n  // Import agent\n  agentCmd\n    .command('import')\n    .description('Import an existing agent using API key')\n    .action(async () => {\n      const { apiKey } = await inquirer.prompt([\n        {\n          type: 'input',\n          name: 'apiKey',\n          message: 'Enter agent API key:',\n          validate: (input: string) => input.length > 0 || 'API key is required',\n        },\n      ]);\n\n      try {\n        const client = new MemoreumClient({ apiKey });\n        \n        const agentData = await withSpinner('Importing agent...', async () => {\n          const response = await client.getAgent();\n          if (!response.success || !response.data) {\n            throw new Error(response.error || 'Invalid API key');\n          }\n          return response.data;\n        });\n\n        // Check if already exists\n        const existing = getAgents().find((a) => a.id === agentData.id);\n        if (existing) {\n          warn(`Agent \"${agentData.agentName}\" already exists locally`);\n          return;\n        }\n\n        const localAgent: LocalAgentConfig = {\n          id: agentData.id,\n          name: agentData.agentName,\n          apiKey: apiKey,\n          walletAddress: agentData.walletAddress,\n          createdAt: new Date().toISOString(),\n        };\n        addAgent(localAgent);\n        setCurrentAgent(agentData.id);\n\n        success(`Agent \"${agentData.agentName}\" imported successfully!`);\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to import agent');\n      }\n    });\n}\n","import { Command } from 'commander';\nimport inquirer from 'inquirer';\nimport chalk from 'chalk';\nimport { MemoreumClient } from '../../sdk/MemoreumClient.js';\nimport { getCurrentAgent } from '../config.js';\nimport {\n  success,\n  error,\n  info,\n  printTable,\n  heading,\n  withSpinner,\n  formatDate,\n  truncate,\n} from '../utils.js';\nimport type { MemoryType } from '../../types/index.js';\n\nconst MEMORY_TYPES: MemoryType[] = [\n  'conversation',\n  'experience',\n  'knowledge',\n  'transaction',\n  'observation',\n  'decision',\n  'learning',\n  'error',\n  'success',\n  'interaction',\n];\n\nexport function registerMemoryCommands(program: Command): void {\n  const memoryCmd = program\n    .command('memory')\n    .description('Manage agent memories');\n\n  // Store a memory\n  memoryCmd\n    .command('store')\n    .description('Store a new memory')\n    .option('-t, --title <title>', 'Memory title')\n    .option('-c, --content <content>', 'Memory content')\n    .option('--type <type>', 'Memory type')\n    .option('--tags <tags>', 'Comma-separated tags')\n    .option('--public', 'Make memory public')\n    .option('--importance <n>', 'Importance (0-1)', parseFloat)\n    .action(async (options) => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      let { title, content, type, tags, importance } = options;\n      const isPublic = options.public || false;\n\n      // Interactive mode if not all required options provided\n      if (!title || !content) {\n        const answers = await inquirer.prompt([\n          {\n            type: 'input',\n            name: 'title',\n            message: 'Memory title:',\n            when: !title,\n            validate: (input: string) => input.length > 0 || 'Title is required',\n          },\n          {\n            type: 'editor',\n            name: 'content',\n            message: 'Memory content (opens editor):',\n            when: !content,\n            validate: (input: string) => input.length > 0 || 'Content is required',\n          },\n          {\n            type: 'list',\n            name: 'type',\n            message: 'Memory type:',\n            choices: MEMORY_TYPES,\n            when: !type,\n            default: 'knowledge',\n          },\n          {\n            type: 'input',\n            name: 'tags',\n            message: 'Tags (comma-separated):',\n            when: !tags,\n          },\n          {\n            type: 'number',\n            name: 'importance',\n            message: 'Importance (0-1):',\n            when: importance === undefined,\n            default: 0.5,\n          },\n        ]);\n\n        title = title || answers.title;\n        content = content || answers.content;\n        type = type || answers.type;\n        tags = tags || answers.tags;\n        importance = importance ?? answers.importance;\n      }\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        const memory = await withSpinner('Storing memory...', async () => {\n          const response = await client.storeMemory({\n            memoryType: type as MemoryType,\n            title,\n            content,\n            importance: importance || 0.5,\n            tags: tags ? tags.split(',').map((t: string) => t.trim()) : [],\n            isPublic,\n          });\n          \n          if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to store memory');\n          }\n          return response.data;\n        });\n\n        success('Memory stored successfully!');\n        console.log(chalk.gray('Memory ID:'), memory.id);\n        console.log(chalk.gray('Content Hash:'), memory.contentHash);\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to store memory');\n      }\n    });\n\n  // List memories\n  memoryCmd\n    .command('list')\n    .description('List your memories')\n    .option('-l, --limit <n>', 'Number of memories', '20')\n    .option('--type <type>', 'Filter by type')\n    .option('--public', 'Show only public memories')\n    .action(async (options) => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        const result = await withSpinner('Fetching memories...', async () => {\n          const response = await client.listMemories({\n            limit: parseInt(options.limit),\n            memoryType: options.type as MemoryType,\n            isPublic: options.public ? true : undefined,\n          });\n          \n          if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to fetch memories');\n          }\n          return response.data;\n        });\n\n        if (result.items.length === 0) {\n          info('No memories found.');\n          return;\n        }\n\n        heading(`Memories (${result.total} total)`);\n        const data = result.items.map((m) => [\n          truncate(m.id, 12),\n          m.memoryType,\n          truncate(m.title, 30),\n          m.isPublic ? chalk.green('Yes') : chalk.gray('No'),\n          String(m.totalSold),\n          formatDate(m.createdAt),\n        ]);\n        printTable(data, ['ID', 'Type', 'Title', 'Public', 'Sold', 'Created']);\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to fetch memories');\n      }\n    });\n\n  // Get memory details\n  memoryCmd\n    .command('get <id>')\n    .description('Get memory details')\n    .action(async (id: string) => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        const memory = await withSpinner('Fetching memory...', async () => {\n          const response = await client.getMemory(id);\n          if (!response.success || !response.data) {\n            throw new Error(response.error || 'Memory not found');\n          }\n          return response.data;\n        });\n\n        heading('Memory Details');\n        console.log(chalk.bold('Title:'), memory.title);\n        console.log(chalk.bold('Type:'), memory.memoryType);\n        console.log(chalk.bold('ID:'), memory.id);\n        console.log(chalk.bold('Public:'), memory.isPublic ? 'Yes' : 'No');\n        console.log(chalk.bold('Importance:'), memory.importance);\n        console.log(chalk.bold('Tags:'), memory.tags.length > 0 ? memory.tags.join(', ') : 'None');\n        console.log(chalk.bold('Total Sold:'), memory.totalSold);\n        console.log(chalk.bold('Created:'), formatDate(memory.createdAt));\n        console.log();\n        console.log(chalk.bold('Content:'));\n        console.log(chalk.gray('─'.repeat(40)));\n        console.log(memory.content);\n        console.log(chalk.gray('─'.repeat(40)));\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to fetch memory');\n      }\n    });\n\n  // Search memories\n  memoryCmd\n    .command('search <query>')\n    .description('Search memories semantically')\n    .option('-l, --limit <n>', 'Number of results', '10')\n    .action(async (query: string, options) => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        const memories = await withSpinner('Searching...', async () => {\n          const response = await client.searchMemories(query, parseInt(options.limit));\n          if (!response.success) {\n            throw new Error(response.error || 'Search failed');\n          }\n          return response.data || [];\n        });\n\n        if (memories.length === 0) {\n          info('No matching memories found.');\n          return;\n        }\n\n        heading(`Search Results for \"${query}\"`);\n        const data = memories.map((m) => [\n          truncate(m.id, 12),\n          m.memoryType,\n          truncate(m.title, 40),\n          formatDate(m.createdAt),\n        ]);\n        printTable(data, ['ID', 'Type', 'Title', 'Created']);\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Search failed');\n      }\n    });\n\n  // Delete memory\n  memoryCmd\n    .command('delete <id>')\n    .description('Delete a memory')\n    .action(async (id: string) => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      const { confirm } = await inquirer.prompt([\n        {\n          type: 'confirm',\n          name: 'confirm',\n          message: 'Are you sure you want to delete this memory?',\n          default: false,\n        },\n      ]);\n\n      if (!confirm) return;\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        await withSpinner('Deleting memory...', async () => {\n          const response = await client.deleteMemory(id);\n          if (!response.success) {\n            throw new Error(response.error || 'Failed to delete memory');\n          }\n        });\n\n        success('Memory deleted successfully');\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to delete memory');\n      }\n    });\n\n  // Get purchased memories\n  memoryCmd\n    .command('purchased')\n    .description('List purchased memories')\n    .action(async () => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        const memories = await withSpinner('Fetching purchased memories...', async () => {\n          const response = await client.getPurchasedMemories();\n          if (!response.success) {\n            throw new Error(response.error || 'Failed to fetch');\n          }\n          return response.data || [];\n        });\n\n        if (memories.length === 0) {\n          info('No purchased memories yet.');\n          return;\n        }\n\n        heading('Purchased Memories');\n        const data = memories.map((m) => [\n          truncate(m.id, 12),\n          m.memoryType,\n          truncate(m.title, 40),\n          formatDate(m.createdAt),\n        ]);\n        printTable(data, ['ID', 'Type', 'Title', 'Purchased']);\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to fetch');\n      }\n    });\n}\n","import { Command } from 'commander';\nimport inquirer from 'inquirer';\nimport chalk from 'chalk';\nimport { MemoreumClient } from '../../sdk/MemoreumClient.js';\nimport { getCurrentAgent } from '../config.js';\nimport {\n  success,\n  error,\n  info,\n  warn,\n  printTable,\n  heading,\n  withSpinner,\n  formatDate,\n  formatEth,\n  truncate,\n} from '../utils.js';\n\nexport function registerMarketplaceCommands(program: Command): void {\n  const marketCmd = program\n    .command('marketplace')\n    .alias('market')\n    .description('Browse and trade on the Memoreum marketplace');\n\n  // Browse listings\n  marketCmd\n    .command('browse')\n    .description('Browse marketplace listings')\n    .option('-l, --limit <n>', 'Number of listings', '20')\n    .option('--type <type>', 'Filter by memory type')\n    .option('--min-price <eth>', 'Minimum price in ETH')\n    .option('--max-price <eth>', 'Maximum price in ETH')\n    .option('--sort <sort>', 'Sort by: price_asc, price_desc, recent, popular')\n    .action(async (options) => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        const result = await withSpinner('Fetching listings...', async () => {\n          const response = await client.browseMarketplace({\n            limit: parseInt(options.limit),\n            memoryType: options.type,\n            minPrice: options.minPrice,\n            maxPrice: options.maxPrice,\n            sortBy: options.sort,\n          });\n          \n          if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to fetch listings');\n          }\n          return response.data;\n        });\n\n        if (result.items.length === 0) {\n          info('No listings found.');\n          return;\n        }\n\n        heading(`Marketplace Listings (${result.total} total)`);\n        const data = result.items.map((l) => [\n          truncate(l.id, 12),\n          l.memory?.title ? truncate(l.memory.title, 30) : 'Unknown',\n          l.memory?.memoryType || '-',\n          formatEth(l.priceEth),\n          String(l.views),\n          l.seller?.agentName ? truncate(l.seller.agentName, 15) : 'Unknown',\n          formatDate(l.listedAt),\n        ]);\n        printTable(data, ['ID', 'Title', 'Type', 'Price', 'Views', 'Seller', 'Listed']);\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to fetch listings');\n      }\n    });\n\n  // Get listing details\n  marketCmd\n    .command('view <listingId>')\n    .description('View listing details')\n    .action(async (listingId: string) => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        const listing = await withSpinner('Fetching listing...', async () => {\n          const response = await client.getListing(listingId);\n          if (!response.success || !response.data) {\n            throw new Error(response.error || 'Listing not found');\n          }\n          return response.data;\n        });\n\n        heading('Listing Details');\n        console.log(chalk.bold('Listing ID:'), listing.id);\n        console.log(chalk.bold('Price:'), chalk.green(formatEth(listing.priceEth)));\n        console.log(chalk.bold('Views:'), listing.views);\n        console.log(chalk.bold('Status:'), listing.isActive ? chalk.green('Active') : chalk.red('Inactive'));\n        console.log(chalk.bold('Listed:'), formatDate(listing.listedAt));\n        if (listing.expiresAt) {\n          console.log(chalk.bold('Expires:'), formatDate(listing.expiresAt));\n        }\n        \n        if (listing.memory) {\n          console.log();\n          console.log(chalk.bold.cyan('Memory Info:'));\n          console.log(chalk.bold('Title:'), listing.memory.title);\n          console.log(chalk.bold('Type:'), listing.memory.memoryType);\n          console.log(chalk.bold('Importance:'), listing.memory.importance);\n          console.log(chalk.bold('Tags:'), listing.memory.tags.length > 0 ? listing.memory.tags.join(', ') : 'None');\n        }\n\n        if (listing.seller) {\n          console.log();\n          console.log(chalk.bold.cyan('Seller Info:'));\n          console.log(chalk.bold('Name:'), listing.seller.agentName);\n          console.log(chalk.bold('Reputation:'), `${(listing.seller.reputationScore * 100).toFixed(1)}%`);\n        }\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to fetch listing');\n      }\n    });\n\n  // Purchase memory\n  marketCmd\n    .command('buy <listingId>')\n    .description('Purchase a memory from the marketplace')\n    .action(async (listingId: string) => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        // Get listing details first\n        const listingResponse = await client.getListing(listingId);\n        if (!listingResponse.success || !listingResponse.data) {\n          error('Listing not found');\n          return;\n        }\n\n        const listing = listingResponse.data;\n        \n        console.log();\n        console.log(chalk.bold('Memory:'), listing.memory?.title || 'Unknown');\n        console.log(chalk.bold('Price:'), chalk.green(formatEth(listing.priceEth)));\n        console.log(chalk.bold('Seller:'), listing.seller?.agentName || 'Unknown');\n        console.log();\n\n        const { confirm } = await inquirer.prompt([\n          {\n            type: 'confirm',\n            name: 'confirm',\n            message: `Purchase this memory for ${formatEth(listing.priceEth)}?`,\n            default: false,\n          },\n        ]);\n\n        if (!confirm) {\n          info('Purchase cancelled');\n          return;\n        }\n\n        const result = await withSpinner('Processing purchase...', async () => {\n          const response = await client.purchaseMemory({ listingId });\n          if (!response.success || !response.data) {\n            throw new Error(response.error || 'Purchase failed');\n          }\n          return response.data;\n        });\n\n        success('Purchase successful!');\n        console.log(chalk.gray('Transaction ID:'), result.transaction.id);\n        console.log(chalk.gray('TX Hash:'), result.txHash);\n        info('The memory has been added to your collection.');\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Purchase failed');\n      }\n    });\n\n  // List memory for sale\n  marketCmd\n    .command('sell <memoryId>')\n    .description('List a memory for sale')\n    .option('-p, --price <eth>', 'Price in ETH')\n    .option('-d, --days <n>', 'Listing duration in days')\n    .action(async (memoryId: string, options) => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      let { price, days } = options;\n\n      if (!price) {\n        const answers = await inquirer.prompt([\n          {\n            type: 'input',\n            name: 'price',\n            message: 'Price in ETH:',\n            validate: (input: string) => {\n              const num = parseFloat(input);\n              return !isNaN(num) && num > 0 || 'Enter a valid price';\n            },\n          },\n          {\n            type: 'number',\n            name: 'days',\n            message: 'Listing duration (days, 0 for no expiry):',\n            default: 30,\n          },\n        ]);\n        price = answers.price;\n        days = answers.days;\n      }\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        const listing = await withSpinner('Creating listing...', async () => {\n          const response = await client.createListing({\n            memoryId,\n            priceEth: price,\n            expiresInDays: days > 0 ? parseInt(days) : undefined,\n          });\n          \n          if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to create listing');\n          }\n          return response.data;\n        });\n\n        success('Memory listed for sale!');\n        console.log(chalk.gray('Listing ID:'), listing.id);\n        console.log(chalk.gray('Price:'), formatEth(listing.priceEth));\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to create listing');\n      }\n    });\n\n  // View my listings\n  marketCmd\n    .command('my-listings')\n    .description('View your active listings')\n    .action(async () => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        const listings = await withSpinner('Fetching your listings...', async () => {\n          const response = await client.getMyListings();\n          if (!response.success) {\n            throw new Error(response.error || 'Failed to fetch listings');\n          }\n          return response.data || [];\n        });\n\n        if (listings.length === 0) {\n          info('You have no active listings.');\n          return;\n        }\n\n        heading('Your Listings');\n        const data = listings.map((l) => [\n          truncate(l.id, 12),\n          l.memory?.title ? truncate(l.memory.title, 30) : 'Unknown',\n          formatEth(l.priceEth),\n          String(l.views),\n          l.isActive ? chalk.green('Active') : chalk.gray('Inactive'),\n          formatDate(l.listedAt),\n        ]);\n        printTable(data, ['ID', 'Title', 'Price', 'Views', 'Status', 'Listed']);\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to fetch listings');\n      }\n    });\n\n  // Remove listing\n  marketCmd\n    .command('remove <listingId>')\n    .description('Remove a listing')\n    .action(async (listingId: string) => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      const { confirm } = await inquirer.prompt([\n        {\n          type: 'confirm',\n          name: 'confirm',\n          message: 'Remove this listing?',\n          default: false,\n        },\n      ]);\n\n      if (!confirm) return;\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        await withSpinner('Removing listing...', async () => {\n          const response = await client.removeListing(listingId);\n          if (!response.success) {\n            throw new Error(response.error || 'Failed to remove listing');\n          }\n        });\n\n        success('Listing removed');\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to remove listing');\n      }\n    });\n}\n","import { Command } from 'commander';\nimport inquirer from 'inquirer';\nimport chalk from 'chalk';\nimport { MemoreumAgent } from '../../agent/MemoreumAgent.js';\nimport { getCurrentAgent, getDefaultAIProvider } from '../config.js';\nimport { error, info, heading, printBox } from '../utils.js';\n\nexport function registerChatCommands(program: Command): void {\n  program\n    .command('chat')\n    .description('Start an interactive chat with your AI agent')\n    .option('--model <model>', 'Override the AI model')\n    .option('--system <prompt>', 'Custom system prompt')\n    .option('--stream', 'Stream responses', true)\n    .action(async (options) => {\n      const agentConfig = getCurrentAgent();\n      if (!agentConfig) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      const aiProvider = getDefaultAIProvider();\n      if (!aiProvider) {\n        error('No AI provider configured. Run `memoreum config add-provider` first.');\n        return;\n      }\n\n      // Override model if specified\n      if (options.model) {\n        aiProvider.model = options.model;\n      }\n\n      const agent = new MemoreumAgent(agentConfig.apiKey, {\n        name: agentConfig.name,\n        aiProvider,\n        systemPrompt: options.system,\n      });\n\n      printBox(\n        `Connected as ${chalk.cyan(agentConfig.name)}\\n` +\n        `Model: ${chalk.gray(aiProvider.model || 'default')}\\n` +\n        `Provider: ${chalk.gray(aiProvider.provider)}\\n\\n` +\n        'Type your message and press Enter.\\n' +\n        'Commands: /clear, /history, /model, /exit',\n        'Memoreum Agent Chat'\n      );\n\n      // Chat loop\n      while (true) {\n        const { message } = await inquirer.prompt([\n          {\n            type: 'input',\n            name: 'message',\n            message: chalk.cyan('You:'),\n            prefix: '',\n          },\n        ]);\n\n        if (!message || message.trim() === '') continue;\n\n        // Handle commands\n        if (message.startsWith('/')) {\n          const cmd = message.slice(1).toLowerCase().trim();\n          \n          if (cmd === 'exit' || cmd === 'quit' || cmd === 'q') {\n            info('Goodbye!');\n            break;\n          }\n          \n          if (cmd === 'clear') {\n            agent.clearHistory();\n            console.clear();\n            info('Conversation cleared');\n            continue;\n          }\n          \n          if (cmd === 'history') {\n            heading('Conversation History');\n            const history = agent.getHistory();\n            history.forEach((msg, i) => {\n              if (msg.role === 'system') return;\n              const prefix = msg.role === 'user' ? chalk.cyan('You:') : chalk.green('Agent:');\n              console.log(`${prefix} ${msg.content.slice(0, 100)}${msg.content.length > 100 ? '...' : ''}`);\n            });\n            continue;\n          }\n          \n          if (cmd === 'model') {\n            info(`Current model: ${agent.getModel()}`);\n            continue;\n          }\n          \n          if (cmd.startsWith('model ')) {\n            const newModel = cmd.slice(6).trim();\n            agent.setModel(newModel);\n            info(`Model changed to: ${newModel}`);\n            continue;\n          }\n\n          if (cmd === 'help') {\n            console.log();\n            console.log(chalk.bold('Available Commands:'));\n            console.log('  /clear    - Clear conversation history');\n            console.log('  /history  - Show conversation history');\n            console.log('  /model    - Show current model');\n            console.log('  /model <name> - Change model');\n            console.log('  /exit     - Exit chat');\n            console.log();\n            continue;\n          }\n          \n          info(`Unknown command: ${cmd}. Type /help for available commands.`);\n          continue;\n        }\n\n        // Get response\n        try {\n          process.stdout.write(chalk.green('\\nAgent: '));\n          \n          if (options.stream) {\n            for await (const chunk of agent.chatStream(message)) {\n              process.stdout.write(chunk);\n            }\n            console.log('\\n');\n          } else {\n            const response = await agent.chat(message);\n            console.log(response);\n            console.log();\n          }\n        } catch (err) {\n          error(err instanceof Error ? err.message : 'Failed to get response');\n        }\n      }\n    });\n\n  // Single message command\n  program\n    .command('ask <message>')\n    .description('Ask your agent a single question')\n    .option('--model <model>', 'Override the AI model')\n    .action(async (message: string, options) => {\n      const agentConfig = getCurrentAgent();\n      if (!agentConfig) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      const aiProvider = getDefaultAIProvider();\n      if (!aiProvider) {\n        error('No AI provider configured. Run `memoreum config add-provider` first.');\n        return;\n      }\n\n      if (options.model) {\n        aiProvider.model = options.model;\n      }\n\n      const agent = new MemoreumAgent(agentConfig.apiKey, {\n        name: agentConfig.name,\n        aiProvider,\n      });\n\n      try {\n        process.stdout.write(chalk.green('Agent: '));\n        \n        for await (const chunk of agent.chatStream(message)) {\n          process.stdout.write(chunk);\n        }\n        console.log();\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to get response');\n      }\n    });\n}\n","import type { AIProvider } from '../types/index.js';\n\nexport interface Message {\n  role: 'system' | 'user' | 'assistant';\n  content: string;\n}\n\nexport interface CompletionOptions {\n  temperature?: number;\n  maxTokens?: number;\n  stopSequences?: string[];\n}\n\nexport interface CompletionResult {\n  content: string;\n  model: string;\n  usage: {\n    promptTokens: number;\n    completionTokens: number;\n    totalTokens: number;\n  };\n  finishReason: string;\n}\n\nexport interface StreamChunk {\n  content: string;\n  done: boolean;\n}\n\nexport abstract class BaseAIProvider {\n  protected apiKey: string;\n  protected _model: string | undefined;\n  protected defaultTemperature: number;\n  protected defaultMaxTokens: number;\n\n  abstract readonly providerName: AIProvider;\n  abstract readonly supportedModels: string[];\n  abstract readonly defaultModel: string;\n\n  constructor(\n    apiKey: string,\n    model?: string,\n    temperature = 0.7,\n    maxTokens = 4096\n  ) {\n    this.apiKey = apiKey;\n    this._model = model;\n    this.defaultTemperature = temperature;\n    this.defaultMaxTokens = maxTokens;\n  }\n\n  protected get model(): string {\n    return this._model || this.defaultModel;\n  }\n\n  protected set model(value: string) {\n    this._model = value;\n  }\n\n  abstract complete(\n    messages: Message[],\n    options?: CompletionOptions\n  ): Promise<CompletionResult>;\n\n  abstract stream(\n    messages: Message[],\n    options?: CompletionOptions\n  ): AsyncGenerator<StreamChunk>;\n\n  getModel(): string {\n    return this.model;\n  }\n\n  setModel(model: string): void {\n    if (!this.supportedModels.includes(model)) {\n      console.warn(`Model ${model} may not be supported by ${this.providerName}`);\n    }\n    this.model = model;\n  }\n\n  validateApiKey(): boolean {\n    return this.apiKey.length > 0;\n  }\n}\n\nexport class AIProviderError extends Error {\n  constructor(\n    message: string,\n    public provider: AIProvider,\n    public statusCode?: number\n  ) {\n    super(`[${provider}] ${message}`);\n    this.name = 'AIProviderError';\n  }\n}\n","import {\n  BaseAIProvider,\n  AIProviderError,\n  type Message,\n  type CompletionOptions,\n  type CompletionResult,\n  type StreamChunk,\n} from '../base.js';\nimport type { AIProvider } from '../../types/index.js';\n\nconst OPENAI_API_URL = 'https://api.openai.com/v1/chat/completions';\n\ninterface OpenAIResponse {\n  id: string;\n  object: string;\n  created: number;\n  model: string;\n  choices: {\n    index: number;\n    message: {\n      role: string;\n      content: string;\n    };\n    finish_reason: string;\n  }[];\n  usage?: {\n    prompt_tokens: number;\n    completion_tokens: number;\n    total_tokens: number;\n  };\n}\n\nexport class OpenAIProvider extends BaseAIProvider {\n  readonly providerName: AIProvider = 'openai';\n  readonly supportedModels = [\n    'gpt-4o',\n    'gpt-4o-mini',\n    'gpt-4-turbo',\n    'gpt-4',\n    'gpt-3.5-turbo',\n    'o1-preview',\n    'o1-mini',\n  ];\n  readonly defaultModel = 'gpt-4o-mini';\n\n  async complete(\n    messages: Message[],\n    options?: CompletionOptions\n  ): Promise<CompletionResult> {\n    try {\n      const res = await fetch(OPENAI_API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${this.apiKey}`,\n        },\n        body: JSON.stringify({\n          model: this.model,\n          messages: messages.map((m) => ({\n            role: m.role,\n            content: m.content,\n          })),\n          temperature: options?.temperature ?? this.defaultTemperature,\n          max_tokens: options?.maxTokens ?? this.defaultMaxTokens,\n          stop: options?.stopSequences,\n        }),\n      });\n\n      if (!res.ok) {\n        const error = await res.text();\n        throw new Error(`OpenAI API error: ${error}`);\n      }\n\n      const response = (await res.json()) as OpenAIResponse;\n      const choice = response.choices[0];\n\n      return {\n        content: choice.message.content || '',\n        model: response.model,\n        usage: {\n          promptTokens: response.usage?.prompt_tokens || 0,\n          completionTokens: response.usage?.completion_tokens || 0,\n          totalTokens: response.usage?.total_tokens || 0,\n        },\n        finishReason: choice.finish_reason || 'stop',\n      };\n    } catch (error) {\n      throw new AIProviderError(\n        error instanceof Error ? error.message : 'Unknown error',\n        this.providerName\n      );\n    }\n  }\n\n  async *stream(\n    messages: Message[],\n    options?: CompletionOptions\n  ): AsyncGenerator<StreamChunk> {\n    try {\n      const res = await fetch(OPENAI_API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${this.apiKey}`,\n        },\n        body: JSON.stringify({\n          model: this.model,\n          messages: messages.map((m) => ({\n            role: m.role,\n            content: m.content,\n          })),\n          temperature: options?.temperature ?? this.defaultTemperature,\n          max_tokens: options?.maxTokens ?? this.defaultMaxTokens,\n          stop: options?.stopSequences,\n          stream: true,\n        }),\n      });\n\n      if (!res.ok) {\n        const error = await res.text();\n        throw new Error(`OpenAI API error: ${error}`);\n      }\n\n      const reader = res.body?.getReader();\n      if (!reader) throw new Error('No response body');\n\n      const decoder = new TextDecoder();\n      let buffer = '';\n\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split('\\n');\n        buffer = lines.pop() || '';\n\n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            if (data === '[DONE]') {\n              yield { content: '', done: true };\n              return;\n            }\n            try {\n              const parsed = JSON.parse(data);\n              const content = parsed.choices[0]?.delta?.content || '';\n              const isDone = parsed.choices[0]?.finish_reason !== null;\n              yield { content, done: isDone };\n            } catch {\n              // Skip invalid JSON\n            }\n          }\n        }\n      }\n    } catch (error) {\n      throw new AIProviderError(\n        error instanceof Error ? error.message : 'Unknown error',\n        this.providerName\n      );\n    }\n  }\n}\n","import {\n  BaseAIProvider,\n  AIProviderError,\n  type Message,\n  type CompletionOptions,\n  type CompletionResult,\n  type StreamChunk,\n} from '../base.js';\nimport type { AIProvider } from '../../types/index.js';\n\nconst ANTHROPIC_API_URL = 'https://api.anthropic.com/v1/messages';\n\ninterface AnthropicResponse {\n  id: string;\n  type: string;\n  role: string;\n  model: string;\n  content: {\n    type: string;\n    text: string;\n  }[];\n  stop_reason: string;\n  usage: {\n    input_tokens: number;\n    output_tokens: number;\n  };\n}\n\nexport class AnthropicProvider extends BaseAIProvider {\n  readonly providerName: AIProvider = 'anthropic';\n  readonly supportedModels = [\n    'claude-3-5-sonnet-20241022',\n    'claude-3-5-haiku-20241022',\n    'claude-3-opus-20240229',\n    'claude-3-sonnet-20240229',\n    'claude-3-haiku-20240307',\n  ];\n  readonly defaultModel = 'claude-3-5-sonnet-20241022';\n\n  async complete(\n    messages: Message[],\n    options?: CompletionOptions\n  ): Promise<CompletionResult> {\n    try {\n      const systemMessage = messages.find((m) => m.role === 'system');\n      const chatMessages = messages.filter((m) => m.role !== 'system');\n\n      const res = await fetch(ANTHROPIC_API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-api-key': this.apiKey,\n          'anthropic-version': '2023-06-01',\n        },\n        body: JSON.stringify({\n          model: this.model,\n          max_tokens: options?.maxTokens ?? this.defaultMaxTokens,\n          temperature: options?.temperature ?? this.defaultTemperature,\n          system: systemMessage?.content,\n          messages: chatMessages.map((m) => ({\n            role: m.role as 'user' | 'assistant',\n            content: m.content,\n          })),\n          stop_sequences: options?.stopSequences,\n        }),\n      });\n\n      if (!res.ok) {\n        const error = await res.text();\n        throw new Error(`Anthropic API error: ${error}`);\n      }\n\n      const response = (await res.json()) as AnthropicResponse;\n      const textContent = response.content\n        .filter((c) => c.type === 'text')\n        .map((c) => c.text)\n        .join('');\n\n      return {\n        content: textContent,\n        model: response.model,\n        usage: {\n          promptTokens: response.usage.input_tokens,\n          completionTokens: response.usage.output_tokens,\n          totalTokens: response.usage.input_tokens + response.usage.output_tokens,\n        },\n        finishReason: response.stop_reason || 'end_turn',\n      };\n    } catch (error) {\n      throw new AIProviderError(\n        error instanceof Error ? error.message : 'Unknown error',\n        this.providerName\n      );\n    }\n  }\n\n  async *stream(\n    messages: Message[],\n    options?: CompletionOptions\n  ): AsyncGenerator<StreamChunk> {\n    try {\n      const systemMessage = messages.find((m) => m.role === 'system');\n      const chatMessages = messages.filter((m) => m.role !== 'system');\n\n      const res = await fetch(ANTHROPIC_API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-api-key': this.apiKey,\n          'anthropic-version': '2023-06-01',\n        },\n        body: JSON.stringify({\n          model: this.model,\n          max_tokens: options?.maxTokens ?? this.defaultMaxTokens,\n          temperature: options?.temperature ?? this.defaultTemperature,\n          system: systemMessage?.content,\n          messages: chatMessages.map((m) => ({\n            role: m.role as 'user' | 'assistant',\n            content: m.content,\n          })),\n          stop_sequences: options?.stopSequences,\n          stream: true,\n        }),\n      });\n\n      if (!res.ok) {\n        const error = await res.text();\n        throw new Error(`Anthropic API error: ${error}`);\n      }\n\n      const reader = res.body?.getReader();\n      if (!reader) throw new Error('No response body');\n\n      const decoder = new TextDecoder();\n      let buffer = '';\n\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split('\\n');\n        buffer = lines.pop() || '';\n\n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            try {\n              const parsed = JSON.parse(data);\n              if (parsed.type === 'content_block_delta') {\n                yield { content: parsed.delta?.text || '', done: false };\n              } else if (parsed.type === 'message_stop') {\n                yield { content: '', done: true };\n              }\n            } catch {\n              // Skip invalid JSON\n            }\n          }\n        }\n      }\n    } catch (error) {\n      throw new AIProviderError(\n        error instanceof Error ? error.message : 'Unknown error',\n        this.providerName\n      );\n    }\n  }\n}\n","import {\n  BaseAIProvider,\n  AIProviderError,\n  type Message,\n  type CompletionOptions,\n  type CompletionResult,\n  type StreamChunk,\n} from '../base.js';\nimport type { AIProvider } from '../../types/index.js';\n\nconst GOOGLE_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models';\n\ninterface GoogleContent {\n  role: string;\n  parts: { text: string }[];\n}\n\ninterface GoogleResponse {\n  candidates: {\n    content: {\n      parts: { text: string }[];\n      role: string;\n    };\n    finishReason: string;\n  }[];\n  usageMetadata?: {\n    promptTokenCount: number;\n    candidatesTokenCount: number;\n    totalTokenCount: number;\n  };\n}\n\nexport class GoogleProvider extends BaseAIProvider {\n  readonly providerName: AIProvider = 'google';\n  readonly supportedModels = [\n    'gemini-2.0-flash-exp',\n    'gemini-1.5-pro',\n    'gemini-1.5-flash',\n    'gemini-1.5-flash-8b',\n    'gemini-pro',\n  ];\n  readonly defaultModel = 'gemini-1.5-flash';\n\n  private convertMessages(messages: Message[]): { contents: GoogleContent[]; systemInstruction?: { parts: { text: string }[] } } {\n    const systemMessage = messages.find((m) => m.role === 'system');\n    const chatMessages = messages.filter((m) => m.role !== 'system');\n\n    const contents = chatMessages.map((m) => ({\n      role: m.role === 'assistant' ? 'model' : 'user',\n      parts: [{ text: m.content }],\n    }));\n\n    return {\n      contents,\n      systemInstruction: systemMessage\n        ? { parts: [{ text: systemMessage.content }] }\n        : undefined,\n    };\n  }\n\n  async complete(\n    messages: Message[],\n    options?: CompletionOptions\n  ): Promise<CompletionResult> {\n    try {\n      const { contents, systemInstruction } = this.convertMessages(messages);\n      const url = `${GOOGLE_API_URL}/${this.model}:generateContent?key=${this.apiKey}`;\n\n      const res = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          contents,\n          systemInstruction,\n          generationConfig: {\n            temperature: options?.temperature ?? this.defaultTemperature,\n            maxOutputTokens: options?.maxTokens ?? this.defaultMaxTokens,\n            stopSequences: options?.stopSequences,\n          },\n        }),\n      });\n\n      if (!res.ok) {\n        const error = await res.text();\n        throw new Error(`Google AI API error: ${error}`);\n      }\n\n      const response = (await res.json()) as GoogleResponse;\n      const candidate = response.candidates[0];\n      const text = candidate?.content?.parts?.map((p) => p.text).join('') || '';\n\n      return {\n        content: text,\n        model: this.model,\n        usage: {\n          promptTokens: response.usageMetadata?.promptTokenCount || 0,\n          completionTokens: response.usageMetadata?.candidatesTokenCount || 0,\n          totalTokens: response.usageMetadata?.totalTokenCount || 0,\n        },\n        finishReason: candidate?.finishReason || 'STOP',\n      };\n    } catch (error) {\n      throw new AIProviderError(\n        error instanceof Error ? error.message : 'Unknown error',\n        this.providerName\n      );\n    }\n  }\n\n  async *stream(\n    messages: Message[],\n    options?: CompletionOptions\n  ): AsyncGenerator<StreamChunk> {\n    try {\n      const { contents, systemInstruction } = this.convertMessages(messages);\n      const url = `${GOOGLE_API_URL}/${this.model}:streamGenerateContent?alt=sse&key=${this.apiKey}`;\n\n      const res = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          contents,\n          systemInstruction,\n          generationConfig: {\n            temperature: options?.temperature ?? this.defaultTemperature,\n            maxOutputTokens: options?.maxTokens ?? this.defaultMaxTokens,\n            stopSequences: options?.stopSequences,\n          },\n        }),\n      });\n\n      if (!res.ok) {\n        const error = await res.text();\n        throw new Error(`Google AI API error: ${error}`);\n      }\n\n      const reader = res.body?.getReader();\n      if (!reader) throw new Error('No response body');\n\n      const decoder = new TextDecoder();\n      let buffer = '';\n\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split('\\n');\n        buffer = lines.pop() || '';\n\n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            try {\n              const parsed = JSON.parse(data) as GoogleResponse;\n              const text = parsed.candidates?.[0]?.content?.parts?.map((p) => p.text).join('') || '';\n              const isDone = parsed.candidates?.[0]?.finishReason === 'STOP';\n              yield { content: text, done: isDone };\n            } catch {\n              // Skip invalid JSON\n            }\n          }\n        }\n      }\n\n      yield { content: '', done: true };\n    } catch (error) {\n      throw new AIProviderError(\n        error instanceof Error ? error.message : 'Unknown error',\n        this.providerName\n      );\n    }\n  }\n}\n","import {\n  BaseAIProvider,\n  AIProviderError,\n  type Message,\n  type CompletionOptions,\n  type CompletionResult,\n  type StreamChunk,\n} from '../base.js';\nimport type { AIProvider } from '../../types/index.js';\n\nconst GROQ_API_URL = 'https://api.groq.com/openai/v1/chat/completions';\n\ninterface GroqResponse {\n  id: string;\n  object: string;\n  created: number;\n  model: string;\n  choices: {\n    index: number;\n    message: {\n      role: string;\n      content: string;\n    };\n    finish_reason: string;\n  }[];\n  usage?: {\n    prompt_tokens: number;\n    completion_tokens: number;\n    total_tokens: number;\n  };\n}\n\nexport class GroqProvider extends BaseAIProvider {\n  readonly providerName: AIProvider = 'groq';\n  readonly supportedModels = [\n    'llama-3.3-70b-versatile',\n    'llama-3.1-70b-versatile',\n    'llama-3.1-8b-instant',\n    'llama3-groq-70b-8192-tool-use-preview',\n    'mixtral-8x7b-32768',\n    'gemma2-9b-it',\n  ];\n  readonly defaultModel = 'llama-3.3-70b-versatile';\n\n  async complete(\n    messages: Message[],\n    options?: CompletionOptions\n  ): Promise<CompletionResult> {\n    try {\n      const res = await fetch(GROQ_API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${this.apiKey}`,\n        },\n        body: JSON.stringify({\n          model: this.model,\n          messages: messages.map((m) => ({\n            role: m.role,\n            content: m.content,\n          })),\n          temperature: options?.temperature ?? this.defaultTemperature,\n          max_tokens: options?.maxTokens ?? this.defaultMaxTokens,\n          stop: options?.stopSequences,\n        }),\n      });\n\n      if (!res.ok) {\n        const error = await res.text();\n        throw new Error(`Groq API error: ${error}`);\n      }\n\n      const response = (await res.json()) as GroqResponse;\n      const choice = response.choices[0];\n\n      return {\n        content: choice.message.content || '',\n        model: response.model || this.model,\n        usage: {\n          promptTokens: response.usage?.prompt_tokens || 0,\n          completionTokens: response.usage?.completion_tokens || 0,\n          totalTokens: response.usage?.total_tokens || 0,\n        },\n        finishReason: choice.finish_reason || 'stop',\n      };\n    } catch (error) {\n      throw new AIProviderError(\n        error instanceof Error ? error.message : 'Unknown error',\n        this.providerName\n      );\n    }\n  }\n\n  async *stream(\n    messages: Message[],\n    options?: CompletionOptions\n  ): AsyncGenerator<StreamChunk> {\n    try {\n      const res = await fetch(GROQ_API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${this.apiKey}`,\n        },\n        body: JSON.stringify({\n          model: this.model,\n          messages: messages.map((m) => ({\n            role: m.role,\n            content: m.content,\n          })),\n          temperature: options?.temperature ?? this.defaultTemperature,\n          max_tokens: options?.maxTokens ?? this.defaultMaxTokens,\n          stop: options?.stopSequences,\n          stream: true,\n        }),\n      });\n\n      if (!res.ok) {\n        const error = await res.text();\n        throw new Error(`Groq API error: ${error}`);\n      }\n\n      const reader = res.body?.getReader();\n      if (!reader) throw new Error('No response body');\n\n      const decoder = new TextDecoder();\n      let buffer = '';\n\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split('\\n');\n        buffer = lines.pop() || '';\n\n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            if (data === '[DONE]') {\n              yield { content: '', done: true };\n              return;\n            }\n            try {\n              const parsed = JSON.parse(data);\n              const content = parsed.choices[0]?.delta?.content || '';\n              const isDone = parsed.choices[0]?.finish_reason !== null;\n              yield { content, done: isDone };\n            } catch {\n              // Skip invalid JSON\n            }\n          }\n        }\n      }\n    } catch (error) {\n      throw new AIProviderError(\n        error instanceof Error ? error.message : 'Unknown error',\n        this.providerName\n      );\n    }\n  }\n}\n","import {\n  BaseAIProvider,\n  AIProviderError,\n  type Message,\n  type CompletionOptions,\n  type CompletionResult,\n  type StreamChunk,\n} from '../base.js';\nimport type { AIProvider } from '../../types/index.js';\n\nconst TOGETHER_API_URL = 'https://api.together.xyz/v1/chat/completions';\n\ninterface TogetherResponse {\n  id: string;\n  object: string;\n  created: number;\n  model: string;\n  choices: {\n    index: number;\n    message: {\n      role: string;\n      content: string;\n    };\n    finish_reason: string;\n  }[];\n  usage?: {\n    prompt_tokens: number;\n    completion_tokens: number;\n    total_tokens: number;\n  };\n}\n\nexport class TogetherProvider extends BaseAIProvider {\n  readonly providerName: AIProvider = 'together';\n  readonly supportedModels = [\n    'meta-llama/Meta-Llama-3.1-405B-Instruct-Turbo',\n    'meta-llama/Meta-Llama-3.1-70B-Instruct-Turbo',\n    'meta-llama/Meta-Llama-3.1-8B-Instruct-Turbo',\n    'mistralai/Mixtral-8x22B-Instruct-v0.1',\n    'mistralai/Mistral-7B-Instruct-v0.3',\n    'Qwen/Qwen2.5-72B-Instruct-Turbo',\n    'deepseek-ai/deepseek-llm-67b-chat',\n  ];\n  readonly defaultModel = 'meta-llama/Meta-Llama-3.1-70B-Instruct-Turbo';\n\n  async complete(\n    messages: Message[],\n    options?: CompletionOptions\n  ): Promise<CompletionResult> {\n    try {\n      const res = await fetch(TOGETHER_API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${this.apiKey}`,\n        },\n        body: JSON.stringify({\n          model: this.model,\n          messages: messages.map((m) => ({\n            role: m.role,\n            content: m.content,\n          })),\n          temperature: options?.temperature ?? this.defaultTemperature,\n          max_tokens: options?.maxTokens ?? this.defaultMaxTokens,\n          stop: options?.stopSequences,\n        }),\n      });\n\n      if (!res.ok) {\n        const error = await res.text();\n        throw new Error(`Together API error: ${error}`);\n      }\n\n      const response = (await res.json()) as TogetherResponse;\n      const choice = response.choices[0];\n\n      return {\n        content: choice.message?.content || '',\n        model: response.model || this.model,\n        usage: {\n          promptTokens: response.usage?.prompt_tokens || 0,\n          completionTokens: response.usage?.completion_tokens || 0,\n          totalTokens: response.usage?.total_tokens || 0,\n        },\n        finishReason: choice.finish_reason || 'stop',\n      };\n    } catch (error) {\n      throw new AIProviderError(\n        error instanceof Error ? error.message : 'Unknown error',\n        this.providerName\n      );\n    }\n  }\n\n  async *stream(\n    messages: Message[],\n    options?: CompletionOptions\n  ): AsyncGenerator<StreamChunk> {\n    try {\n      const res = await fetch(TOGETHER_API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${this.apiKey}`,\n        },\n        body: JSON.stringify({\n          model: this.model,\n          messages: messages.map((m) => ({\n            role: m.role,\n            content: m.content,\n          })),\n          temperature: options?.temperature ?? this.defaultTemperature,\n          max_tokens: options?.maxTokens ?? this.defaultMaxTokens,\n          stop: options?.stopSequences,\n          stream: true,\n        }),\n      });\n\n      if (!res.ok) {\n        const error = await res.text();\n        throw new Error(`Together API error: ${error}`);\n      }\n\n      const reader = res.body?.getReader();\n      if (!reader) throw new Error('No response body');\n\n      const decoder = new TextDecoder();\n      let buffer = '';\n\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split('\\n');\n        buffer = lines.pop() || '';\n\n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            if (data === '[DONE]') {\n              yield { content: '', done: true };\n              return;\n            }\n            try {\n              const parsed = JSON.parse(data);\n              const content = parsed.choices[0]?.delta?.content || '';\n              const isDone = parsed.choices[0]?.finish_reason !== null;\n              yield { content, done: isDone };\n            } catch {\n              // Skip invalid JSON\n            }\n          }\n        }\n      }\n    } catch (error) {\n      throw new AIProviderError(\n        error instanceof Error ? error.message : 'Unknown error',\n        this.providerName\n      );\n    }\n  }\n}\n","import {\n  BaseAIProvider,\n  AIProviderError,\n  type Message,\n  type CompletionOptions,\n  type CompletionResult,\n  type StreamChunk,\n} from '../base.js';\nimport type { AIProvider } from '../../types/index.js';\n\ninterface OllamaResponse {\n  model: string;\n  message: {\n    role: string;\n    content: string;\n  };\n  done: boolean;\n  total_duration?: number;\n  prompt_eval_count?: number;\n  eval_count?: number;\n}\n\nexport class OllamaProvider extends BaseAIProvider {\n  readonly providerName: AIProvider = 'ollama';\n  readonly supportedModels = [\n    'llama3.2',\n    'llama3.1',\n    'llama3',\n    'mistral',\n    'mixtral',\n    'codellama',\n    'deepseek-coder',\n    'phi3',\n    'gemma2',\n    'qwen2.5',\n  ];\n  readonly defaultModel = 'llama3.2';\n\n  private baseUrl: string;\n\n  constructor(apiKey: string, model?: string, temperature?: number, maxTokens?: number) {\n    // apiKey is used as baseUrl for Ollama (e.g., \"http://localhost:11434\")\n    super(apiKey, model, temperature, maxTokens);\n    this.baseUrl = apiKey || 'http://localhost:11434';\n  }\n\n  async complete(\n    messages: Message[],\n    options?: CompletionOptions\n  ): Promise<CompletionResult> {\n    try {\n      const response = await fetch(`${this.baseUrl}/api/chat`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          model: this.model,\n          messages: messages.map((m) => ({\n            role: m.role,\n            content: m.content,\n          })),\n          options: {\n            temperature: options?.temperature ?? this.defaultTemperature,\n            num_predict: options?.maxTokens ?? this.defaultMaxTokens,\n            stop: options?.stopSequences,\n          },\n          stream: false,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      const data = (await response.json()) as OllamaResponse;\n\n      return {\n        content: data.message.content,\n        model: data.model,\n        usage: {\n          promptTokens: data.prompt_eval_count || 0,\n          completionTokens: data.eval_count || 0,\n          totalTokens: (data.prompt_eval_count || 0) + (data.eval_count || 0),\n        },\n        finishReason: 'stop',\n      };\n    } catch (error) {\n      throw new AIProviderError(\n        error instanceof Error ? error.message : 'Unknown error',\n        this.providerName\n      );\n    }\n  }\n\n  async *stream(\n    messages: Message[],\n    options?: CompletionOptions\n  ): AsyncGenerator<StreamChunk> {\n    try {\n      const response = await fetch(`${this.baseUrl}/api/chat`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          model: this.model,\n          messages: messages.map((m) => ({\n            role: m.role,\n            content: m.content,\n          })),\n          options: {\n            temperature: options?.temperature ?? this.defaultTemperature,\n            num_predict: options?.maxTokens ?? this.defaultMaxTokens,\n            stop: options?.stopSequences,\n          },\n          stream: true,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      const reader = response.body?.getReader();\n      if (!reader) {\n        throw new Error('No response body');\n      }\n\n      const decoder = new TextDecoder();\n\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        const text = decoder.decode(value, { stream: true });\n        const lines = text.split('\\n').filter(Boolean);\n\n        for (const line of lines) {\n          try {\n            const data: OllamaResponse = JSON.parse(line);\n            yield {\n              content: data.message?.content || '',\n              done: data.done,\n            };\n          } catch {\n            // Skip invalid JSON lines\n          }\n        }\n      }\n    } catch (error) {\n      throw new AIProviderError(\n        error instanceof Error ? error.message : 'Unknown error',\n        this.providerName\n      );\n    }\n  }\n}\n","import { BaseAIProvider, AIProviderError } from './base.js';\nimport { OpenAIProvider } from './providers/openai.js';\nimport { AnthropicProvider } from './providers/anthropic.js';\nimport { GoogleProvider } from './providers/google.js';\nimport { GroqProvider } from './providers/groq.js';\nimport { TogetherProvider } from './providers/together.js';\nimport { OllamaProvider } from './providers/ollama.js';\nimport type { AIProvider, AIProviderConfig } from '../types/index.js';\n\nexport {\n  BaseAIProvider,\n  AIProviderError,\n  OpenAIProvider,\n  AnthropicProvider,\n  GoogleProvider,\n  GroqProvider,\n  TogetherProvider,\n  OllamaProvider,\n};\n\nexport type { Message, CompletionOptions, CompletionResult, StreamChunk } from './base.js';\n\n/**\n * Create an AI provider instance from configuration\n */\nexport function createProvider(config: AIProviderConfig): BaseAIProvider {\n  const { provider, apiKey, model, temperature, maxTokens } = config;\n\n  switch (provider) {\n    case 'openai':\n      return new OpenAIProvider(apiKey, model, temperature, maxTokens);\n    \n    case 'anthropic':\n      return new AnthropicProvider(apiKey, model, temperature, maxTokens);\n    \n    case 'google':\n      return new GoogleProvider(apiKey, model, temperature, maxTokens);\n    \n    case 'groq':\n      return new GroqProvider(apiKey, model, temperature, maxTokens);\n    \n    case 'together':\n      return new TogetherProvider(apiKey, model, temperature, maxTokens);\n    \n    case 'ollama':\n      return new OllamaProvider(apiKey, model, temperature, maxTokens);\n    \n    case 'deepseek':\n      // DeepSeek uses OpenAI-compatible API\n      return new OpenAIProvider(apiKey, model || 'deepseek-chat', temperature, maxTokens);\n    \n    case 'mistral':\n      // Mistral uses OpenAI-compatible API\n      return new OpenAIProvider(apiKey, model || 'mistral-large-latest', temperature, maxTokens);\n    \n    default:\n      throw new Error(`Unsupported AI provider: ${provider}`);\n  }\n}\n\n/**\n * Get available models for a provider\n */\nexport function getAvailableModels(provider: AIProvider): string[] {\n  const models: Record<AIProvider, string[]> = {\n    openai: ['gpt-4o', 'gpt-4o-mini', 'gpt-4-turbo', 'gpt-4', 'gpt-3.5-turbo', 'o1-preview', 'o1-mini'],\n    anthropic: ['claude-3-5-sonnet-20241022', 'claude-3-5-haiku-20241022', 'claude-3-opus-20240229', 'claude-3-sonnet-20240229', 'claude-3-haiku-20240307'],\n    google: ['gemini-2.0-flash-exp', 'gemini-1.5-pro', 'gemini-1.5-flash', 'gemini-1.5-flash-8b', 'gemini-pro'],\n    groq: ['llama-3.3-70b-versatile', 'llama-3.1-70b-versatile', 'llama-3.1-8b-instant', 'mixtral-8x7b-32768', 'gemma2-9b-it'],\n    together: ['meta-llama/Meta-Llama-3.1-405B-Instruct-Turbo', 'meta-llama/Meta-Llama-3.1-70B-Instruct-Turbo', 'mistralai/Mixtral-8x22B-Instruct-v0.1', 'Qwen/Qwen2.5-72B-Instruct-Turbo'],\n    ollama: ['llama3.2', 'llama3.1', 'mistral', 'mixtral', 'codellama', 'phi3', 'gemma2', 'qwen2.5'],\n    deepseek: ['deepseek-chat', 'deepseek-coder'],\n    mistral: ['mistral-large-latest', 'mistral-medium-latest', 'mistral-small-latest', 'codestral-latest'],\n  };\n\n  return models[provider] || [];\n}\n\n/**\n * Get default model for a provider\n */\nexport function getDefaultModel(provider: AIProvider): string {\n  const defaults: Record<AIProvider, string> = {\n    openai: 'gpt-4o-mini',\n    anthropic: 'claude-3-5-sonnet-20241022',\n    google: 'gemini-1.5-flash',\n    groq: 'llama-3.3-70b-versatile',\n    together: 'meta-llama/Meta-Llama-3.1-70B-Instruct-Turbo',\n    ollama: 'llama3.2',\n    deepseek: 'deepseek-chat',\n    mistral: 'mistral-large-latest',\n  };\n\n  return defaults[provider] || 'gpt-4o-mini';\n}\n","import { MemoreumClient } from '../sdk/MemoreumClient.js';\nimport { createProvider, type Message, type BaseAIProvider } from '../ai/index.js';\nimport type {\n  AgentConfig,\n  Memory,\n  CreateMemoryInput,\n  MarketplaceListing,\n  AgentEvent,\n  EventHandler,\n} from '../types/index.js';\n\nconst DEFAULT_SYSTEM_PROMPT = `You are an autonomous AI agent operating on the Memoreum network - a decentralized marketplace for AI agent memories on Base Chain.\n\nYour capabilities:\n- Store experiences, learnings, and insights as memories\n- Browse and purchase valuable memories from other agents\n- Sell your own memories to earn ETH\n- Make decisions based on your accumulated knowledge\n\nGuidelines:\n- Be helpful, accurate, and thoughtful in your responses\n- Consider whether experiences are worth storing as memories\n- Evaluate the value of memories before purchasing\n- Build your reputation through quality interactions\n\nYou have access to stored memories that may help inform your responses.`;\n\nexport class MemoreumAgent {\n  private client: MemoreumClient;\n  private aiProvider: BaseAIProvider;\n  private config: AgentConfig;\n  private conversationHistory: Message[] = [];\n  private eventHandlers: Map<string, EventHandler[]> = new Map();\n  private isRunning = false;\n\n  constructor(memoreumApiKey: string, config: AgentConfig) {\n    this.config = config;\n    this.client = new MemoreumClient({ apiKey: memoreumApiKey });\n    this.aiProvider = createProvider(config.aiProvider);\n\n    // Initialize with system prompt\n    this.conversationHistory.push({\n      role: 'system',\n      content: config.systemPrompt || DEFAULT_SYSTEM_PROMPT,\n    });\n  }\n\n  // ============================================\n  // Event System\n  // ============================================\n\n  on(event: string, handler: EventHandler): void {\n    const handlers = this.eventHandlers.get(event) || [];\n    handlers.push(handler);\n    this.eventHandlers.set(event, handlers);\n  }\n\n  off(event: string, handler: EventHandler): void {\n    const handlers = this.eventHandlers.get(event) || [];\n    const index = handlers.indexOf(handler);\n    if (index > -1) {\n      handlers.splice(index, 1);\n      this.eventHandlers.set(event, handlers);\n    }\n  }\n\n  private emit(event: AgentEvent): void {\n    const handlers = this.eventHandlers.get(event.type) || [];\n    const allHandlers = this.eventHandlers.get('*') || [];\n    \n    [...handlers, ...allHandlers].forEach((handler) => {\n      try {\n        handler(event);\n      } catch (error) {\n        console.error('Event handler error:', error);\n      }\n    });\n  }\n\n  // ============================================\n  // Chat Methods\n  // ============================================\n\n  /**\n   * Send a message and get a response\n   */\n  async chat(message: string): Promise<string> {\n    this.emit({\n      type: 'agent:thinking',\n      timestamp: new Date(),\n      data: { message },\n    });\n\n    // Add user message to history\n    this.conversationHistory.push({\n      role: 'user',\n      content: message,\n    });\n\n    // Retrieve relevant memories to augment context\n    const relevantMemories = await this.retrieveRelevantMemories(message);\n    \n    // Build context-aware messages\n    const messagesWithContext = this.buildContextualMessages(relevantMemories);\n\n    try {\n      const result = await this.aiProvider.complete(messagesWithContext);\n      \n      // Add assistant response to history\n      this.conversationHistory.push({\n        role: 'assistant',\n        content: result.content,\n      });\n\n      this.emit({\n        type: 'agent:response',\n        timestamp: new Date(),\n        data: {\n          response: result.content,\n          usage: result.usage,\n          model: result.model,\n        },\n      });\n\n      // Auto-store if enabled\n      if (this.config.autoStore && this.shouldStoreInteraction(message, result.content)) {\n        await this.storeInteraction(message, result.content);\n      }\n\n      return result.content;\n    } catch (error) {\n      this.emit({\n        type: 'agent:error',\n        timestamp: new Date(),\n        data: { error },\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Stream a chat response\n   */\n  async *chatStream(message: string): AsyncGenerator<string> {\n    this.emit({\n      type: 'agent:thinking',\n      timestamp: new Date(),\n      data: { message },\n    });\n\n    this.conversationHistory.push({\n      role: 'user',\n      content: message,\n    });\n\n    const relevantMemories = await this.retrieveRelevantMemories(message);\n    const messagesWithContext = this.buildContextualMessages(relevantMemories);\n\n    let fullResponse = '';\n\n    try {\n      for await (const chunk of this.aiProvider.stream(messagesWithContext)) {\n        fullResponse += chunk.content;\n        yield chunk.content;\n      }\n\n      this.conversationHistory.push({\n        role: 'assistant',\n        content: fullResponse,\n      });\n\n      this.emit({\n        type: 'agent:response',\n        timestamp: new Date(),\n        data: { response: fullResponse },\n      });\n\n      if (this.config.autoStore && this.shouldStoreInteraction(message, fullResponse)) {\n        await this.storeInteraction(message, fullResponse);\n      }\n    } catch (error) {\n      this.emit({\n        type: 'agent:error',\n        timestamp: new Date(),\n        data: { error },\n      });\n      throw error;\n    }\n  }\n\n  // ============================================\n  // Memory Management\n  // ============================================\n\n  private async retrieveRelevantMemories(query: string): Promise<Memory[]> {\n    try {\n      const response = await this.client.searchMemories(query, 5);\n      return response.success ? (response.data || []) : [];\n    } catch {\n      return [];\n    }\n  }\n\n  private buildContextualMessages(memories: Memory[]): Message[] {\n    const messages = [...this.conversationHistory];\n    \n    if (memories.length > 0) {\n      const memoryContext = memories\n        .map((m) => `[Memory: ${m.title}]\\n${m.content}`)\n        .join('\\n\\n');\n\n      // Insert memory context before the last user message\n      const lastUserIndex = messages.length - 1;\n      messages.splice(lastUserIndex, 0, {\n        role: 'system',\n        content: `Relevant memories from your knowledge base:\\n\\n${memoryContext}`,\n      });\n    }\n\n    return messages;\n  }\n\n  private shouldStoreInteraction(userMessage: string, assistantResponse: string): boolean {\n    // Simple heuristics for deciding whether to store\n    const totalLength = userMessage.length + assistantResponse.length;\n    const hasSubstance = totalLength > 200;\n    const isQuestion = userMessage.includes('?');\n    const hasLearning = /learn|understand|realize|insight|important|remember/i.test(assistantResponse);\n    \n    return hasSubstance && (isQuestion || hasLearning);\n  }\n\n  private async storeInteraction(userMessage: string, assistantResponse: string): Promise<void> {\n    try {\n      await this.storeMemory({\n        memoryType: 'conversation',\n        title: userMessage.slice(0, 100),\n        content: `User: ${userMessage}\\n\\nAssistant: ${assistantResponse}`,\n        importance: 0.5,\n        tags: ['conversation', 'auto-stored'],\n        metadata: {\n          source: 'chat',\n          model: this.aiProvider.getModel(),\n        },\n      });\n    } catch (error) {\n      console.error('Failed to auto-store interaction:', error);\n    }\n  }\n\n  /**\n   * Store a memory\n   */\n  async storeMemory(input: CreateMemoryInput): Promise<Memory | null> {\n    const response = await this.client.storeMemory(input);\n    \n    if (response.success && response.data) {\n      this.emit({\n        type: 'memory:created',\n        timestamp: new Date(),\n        data: response.data,\n      });\n      return response.data;\n    }\n\n    return null;\n  }\n\n  /**\n   * Get agent's memories\n   */\n  async getMemories(limit = 20): Promise<Memory[]> {\n    const response = await this.client.listMemories({ limit });\n    return response.success ? (response.data?.items || []) : [];\n  }\n\n  /**\n   * Search memories\n   */\n  async searchMemories(query: string, limit = 10): Promise<Memory[]> {\n    const response = await this.client.searchMemories(query, limit);\n    return response.success ? (response.data || []) : [];\n  }\n\n  // ============================================\n  // Marketplace Methods\n  // ============================================\n\n  /**\n   * Browse marketplace\n   */\n  async browseMarketplace(limit = 20): Promise<MarketplaceListing[]> {\n    const response = await this.client.browseMarketplace({ limit });\n    return response.success ? (response.data?.items || []) : [];\n  }\n\n  /**\n   * Purchase a memory\n   */\n  async purchaseMemory(listingId: string): Promise<boolean> {\n    const response = await this.client.purchaseMemory({ listingId });\n    \n    if (response.success) {\n      this.emit({\n        type: 'purchase:completed',\n        timestamp: new Date(),\n        data: response.data,\n      });\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * List a memory for sale\n   */\n  async listMemory(memoryId: string, priceEth: string): Promise<boolean> {\n    const response = await this.client.createListing({ memoryId, priceEth });\n    \n    if (response.success) {\n      this.emit({\n        type: 'listing:created',\n        timestamp: new Date(),\n        data: response.data,\n      });\n      return true;\n    }\n\n    return false;\n  }\n\n  // ============================================\n  // Agent Control\n  // ============================================\n\n  /**\n   * Clear conversation history\n   */\n  clearHistory(): void {\n    this.conversationHistory = [this.conversationHistory[0]]; // Keep system prompt\n  }\n\n  /**\n   * Get conversation history\n   */\n  getHistory(): Message[] {\n    return [...this.conversationHistory];\n  }\n\n  /**\n   * Update system prompt\n   */\n  setSystemPrompt(prompt: string): void {\n    this.conversationHistory[0] = {\n      role: 'system',\n      content: prompt,\n    };\n  }\n\n  /**\n   * Get the underlying client\n   */\n  getClient(): MemoreumClient {\n    return this.client;\n  }\n\n  /**\n   * Get current model\n   */\n  getModel(): string {\n    return this.aiProvider.getModel();\n  }\n\n  /**\n   * Change model\n   */\n  setModel(model: string): void {\n    this.aiProvider.setModel(model);\n  }\n\n  // ============================================\n  // Autonomous Loop (Optional)\n  // ============================================\n\n  /**\n   * Start autonomous operation loop\n   */\n  async startAutonomous(\n    taskFn: (agent: MemoreumAgent) => Promise<void>,\n    intervalMs = 60000\n  ): Promise<void> {\n    this.isRunning = true;\n\n    while (this.isRunning) {\n      try {\n        await taskFn(this);\n      } catch (error) {\n        this.emit({\n          type: 'agent:error',\n          timestamp: new Date(),\n          data: { error },\n        });\n      }\n\n      if (this.isRunning) {\n        await new Promise((resolve) => setTimeout(resolve, intervalMs));\n      }\n    }\n  }\n\n  /**\n   * Stop autonomous operation\n   */\n  stop(): void {\n    this.isRunning = false;\n  }\n\n  /**\n   * Check if agent is running autonomously\n   */\n  isAutonomous(): boolean {\n    return this.isRunning;\n  }\n}\n\nexport default MemoreumAgent;\n","import { Command } from 'commander';\nimport inquirer from 'inquirer';\nimport chalk from 'chalk';\nimport { MemoreumClient } from '../../sdk/MemoreumClient.js';\nimport { getCurrentAgent } from '../config.js';\nimport {\n  success,\n  error,\n  info,\n  warn,\n  printTable,\n  heading,\n  withSpinner,\n  formatEth,\n} from '../utils.js';\n\nexport function registerWalletCommands(program: Command): void {\n  const walletCmd = program\n    .command('wallet')\n    .description('Manage agent wallet');\n\n  // Show wallet info\n  walletCmd\n    .command('info')\n    .description('Show wallet information')\n    .action(async () => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        const balance = await withSpinner('Fetching wallet info...', async () => {\n          const response = await client.getBalance();\n          if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to fetch balance');\n          }\n          return response.data;\n        });\n\n        heading('Wallet Information');\n        const data = [\n          ['Address', agent.walletAddress],\n          ['Balance', chalk.green(formatEth(balance.balanceEth))],\n          ['Network', 'Base'],\n        ];\n        printTable(data, ['Field', 'Value']);\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to fetch wallet info');\n      }\n    });\n\n  // Show balance\n  walletCmd\n    .command('balance')\n    .description('Show wallet balance')\n    .action(async () => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        const balance = await withSpinner('Fetching balance...', async () => {\n          const response = await client.getBalance();\n          if (!response.success || !response.data) {\n            throw new Error(response.error || 'Failed to fetch balance');\n          }\n          return response.data;\n        });\n\n        console.log();\n        console.log(chalk.bold('Balance:'), chalk.green(formatEth(balance.balanceEth)));\n        console.log();\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to fetch balance');\n      }\n    });\n\n  // Show address\n  walletCmd\n    .command('address')\n    .description('Show wallet address')\n    .action(() => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      console.log();\n      console.log(chalk.bold('Wallet Address:'));\n      console.log(agent.walletAddress);\n      console.log();\n      info('Send ETH to this address on Base network to fund your agent.');\n    });\n\n  // Transaction history\n  walletCmd\n    .command('history')\n    .description('Show transaction history')\n    .option('-t, --type <type>', 'Filter by type: purchases, sales, all', 'all')\n    .action(async (options) => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      try {\n        const client = new MemoreumClient({ apiKey: agent.apiKey });\n        \n        let transactions: Array<{\n          id: string;\n          type: string;\n          priceEth: string;\n          status: string;\n          createdAt: Date | string;\n        }> = [];\n\n        await withSpinner('Fetching transactions...', async () => {\n          if (options.type === 'all' || options.type === 'purchases') {\n            const purchaseResponse = await client.getPurchaseHistory();\n            if (purchaseResponse.success && purchaseResponse.data) {\n              transactions.push(\n                ...purchaseResponse.data.map((t) => ({\n                  ...t,\n                  type: 'Purchase',\n                }))\n              );\n            }\n          }\n\n          if (options.type === 'all' || options.type === 'sales') {\n            const salesResponse = await client.getSalesHistory();\n            if (salesResponse.success && salesResponse.data) {\n              transactions.push(\n                ...salesResponse.data.map((t) => ({\n                  ...t,\n                  type: 'Sale',\n                }))\n              );\n            }\n          }\n        });\n\n        if (transactions.length === 0) {\n          info('No transactions found.');\n          return;\n        }\n\n        // Sort by date\n        transactions.sort((a, b) => \n          new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n        );\n\n        heading('Transaction History');\n        const data = transactions.slice(0, 20).map((t) => [\n          t.id.slice(0, 12) + '...',\n          t.type === 'Purchase' ? chalk.red(t.type) : chalk.green(t.type),\n          formatEth(t.priceEth),\n          t.status === 'completed' ? chalk.green(t.status) : chalk.yellow(t.status),\n          new Date(t.createdAt).toLocaleDateString(),\n        ]);\n        printTable(data, ['ID', 'Type', 'Amount', 'Status', 'Date']);\n      } catch (err) {\n        error(err instanceof Error ? err.message : 'Failed to fetch transactions');\n      }\n    });\n\n  // Fund wallet instructions\n  walletCmd\n    .command('fund')\n    .description('Instructions to fund your wallet')\n    .action(() => {\n      const agent = getCurrentAgent();\n      if (!agent) {\n        error('No agent selected. Run `memoreum agent use <id>` first.');\n        return;\n      }\n\n      heading('Fund Your Wallet');\n      \n      console.log(chalk.bold('Your wallet address:'));\n      console.log(chalk.cyan(agent.walletAddress));\n      console.log();\n      \n      console.log(chalk.bold('To fund your agent wallet:'));\n      console.log();\n      console.log('1. Make sure you have ETH on Base network');\n      console.log('2. Send ETH to the address above');\n      console.log('3. Wait for the transaction to confirm');\n      console.log();\n      \n      console.log(chalk.bold('Need Base ETH?'));\n      console.log('• Bridge from Ethereum: https://bridge.base.org');\n      console.log('• Buy on exchanges that support Base');\n      console.log('• Use a faucet for testnet: https://www.coinbase.com/faucets/base-ethereum-goerli-faucet');\n      console.log();\n      \n      warn('Always verify the address before sending funds!');\n    });\n}\n"],"mappings":"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","names":["import_chalk","import_chalk","Conf","config","error","ora","chalk","boxen","chalk","program","config","chalk","inquirer","import_inquirer","import_chalk","program","chalk","inquirer","import_inquirer","import_chalk","program","inquirer","chalk","import_inquirer","import_chalk","program","chalk","inquirer","import_inquirer","import_chalk","error","error","error","error","error","error","config","config","error","program","chalk","inquirer","import_chalk","program","chalk","chalk"]}